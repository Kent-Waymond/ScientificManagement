<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Payoffs</title>
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/css/bootstrap-select.min.css">
    <script src="../jQuery/jquery-3.3.1.min%20(1).js"></script>
    <script type="text/javascript" src="../layui/layui.js"></script>
    <script type="text/javascript" src="../layui/layui.all.js"></script>
    <link rel="stylesheet" href="../layui/css/layui.css" type="text/css"/>
    <script src="https://vuejs.org/js/vue.js"></script>
    <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="../assets/js/bootstrap-select.js"></script>
    <style>
        *:not(input) {
            -webkit-user-select: none;
        }
    </style>
</head>
<body>
<div class="layui-col-md10 layui-col-md-offset2"  style="width: 1100px">
    <div class="layui-row grid-demo grid-demo-bg1">
        <div class="layui-col-md12" style="height: 100px;">
            <form class="layui-form" name="mainform" style="margin-top: 30px;">
                <div class="layui-form-item" >
<!--                    <div class="layui-input-block layui-input-inline"  style="margin-left: 20px;">
                    <select id="mainName" class="selectpicker"  data-live-search="true" data-live-search-placeholder="搜索" data-actions-box="true">
                    </select>
                </div>-->
                    <div class="layui-input-block layui-input-inline"  style="margin-left: 0px;width: 150px;">
                        <select  id="mainPerson" >
                            <option value="">人员</option>
                        </select>
                    </div>
                    <div class="layui-input-block layui-input-inline"  style="margin-left: 20px;width: 150px;">
                        <select  id="mainTaskType" >
                            <option value="">项目类型</option>
                        </select>
                    </div>
                    <div class="layui-input-block layui-input-inline"  style="margin-left: 20px;width: 150px;">
                        <select  id="mainStatus" >
                            <option value="">项目结题状态</option>
                        </select>
                    </div>
                    <div class="layui-input-block layui-input-inline"  style="margin-left: 20px;width: 150px;">
                        <select  id="mainTask" >
                            <option value="">项目名</option>
                        </select>
                    </div>
<!--                    <div class="layui-input-block layui-input-inline"  style="margin-left: 20px;width: 150px;">
                        <select  id="mainSearch" >
                            <option value="">查询</option>
                        </select>
                    </div>-->
                    <div class="layui-input-block layui-input-inline"  style="margin-left: 20px;width: 150px;">
                        <select  id="mainType" >
                        </select>
                    </div>
                    <div class="layui-input-block layui-input-inline" style="margin-left: 15px;">
                        <button type="button" class="layui-btn layui-btn-normal" onclick="Toggle()">切换</button>
                    </div>
                </div>
            </form>

            <div class="myThesis" style="display:none;">
                <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 20px;">
                    <legend>论文</legend>
                </fieldset>
                <form class="layui-form" name="tform" style="margin-top: 30px;">
                    <div class="layui-form-item" >
                        <div class="layui-input-block layui-input-inline" style="width: 200px;margin-left: 20px;">
                            <select name="ttype"  id="myttype">
                            </select>
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="ttitle" placeholder="请输入名称" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="tauthor"  placeholder="请输入作者" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <button class="layui-btn" type="button"  onclick="conditionSearch()"><i class="layui-icon layui-icon-search"></i>查询</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="mySoftwareWork" style="display:none;">
                <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                    <legend>软著</legend>
                </fieldset>
                <form class="layui-form" name="sform" style="margin-top: 30px;">
                    <div class="layui-form-item" >
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="stitle"  placeholder="请输入名称" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="sauthor"  placeholder="请输入作者" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <button class="layui-btn" type="button" onclick="conditionSearch()"><i class="layui-icon layui-icon-search"></i>查询</button>
                        </div>
                    </div>
                </form>

            </div>
            <div class="myPatent" style="display:none;">
                <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                    <legend>专利</legend>
                </fieldset>
                <form class="layui-form" name="pform" style="margin-top: 30px;">
                        <div class=" layui-input-inline" style="margin-left: 0px;width: 180px;">
                            <input type="text" name="ptitle"  placeholder="请输入专利名称" class="layui-input">
                        </div>
                        <div class=" layui-input-inline" style="margin-left: 20px;width: 150px;">
                            <input type="text" name="pagency"  placeholder="请输入代理公司" class="layui-input" >
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <button class="layui-btn" type="button" onclick="conditionSearch()"><i class="layui-icon layui-icon-search"></i>查询</button>
                        </div>
                </form>
            </div>
            <div class="myWriting" style="display:none;">
                <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                    <legend>书籍</legend>
                </fieldset>
                <form class="layui-form" name="wform" style="margin-top: 30px;">
                    <div class="layui-form-item" >
                        <div class="layui-input-block layui-input-inline" style="width: 200px;margin-left: 20px;">
                            <select name="wtype"  id="mywtype">
                            </select>
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="wtitle" placeholder="请输入标题" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="wauthor" placeholder="请输入作者" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <button class="layui-btn" type="button" onclick="conditionSearch()"><i class="layui-icon layui-icon-search"></i>查询</button>
                        </div>
                    </div>
                </form>

            </div>
            <div class="myAward" style="display:none;">
                <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                    <legend>奖项</legend>
                </fieldset>
                <form class="layui-form" name="aform" style="margin-top: 30px;">
                    <div class="layui-form-item" >
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="awardee" placeholder="请输入获奖人" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="aname" placeholder="请输入获奖名称" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <button class="layui-btn" type="button" onclick="conditionSearch()"><i class="layui-icon layui-icon-search"></i>查询</button>
                        </div>
                    </div>
                </form>

            </div>
            <div class="myApp" style="display:block;">
                <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                    <legend>软件</legend>
                </fieldset>
                <form class="layui-form" name="appform" style="margin-top: 30px;">
                    <div class="layui-form-item" >
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="appname" placeholder="请输入软件名称" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="appauthor" placeholder="请输入作者" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <button class="layui-btn" type="button" onclick="conditionSearch()"><i class="layui-icon layui-icon-search"></i>查询</button>
                        </div>
                    </div>
                </form>

            </div>
            <div class="myReport" style="display: none" >
                <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                    <legend>报告</legend>
                </fieldset>
                <form class="layui-form" name="rform" style="margin-top: 30px;margin-left: 20px;">
                    <div class="layui-form-item" >
                        <div class="layui-input-block layui-input-inline" style="margin-left: 0px">
                            <input type="text" name="rname" placeholder="请输入报告名称" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <input type="text" name="rauthor" placeholder="请输入撰写人" class="layui-input" style="width: 200px;">
                        </div>
                        <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                            <button class="layui-btn" type="button" onclick="conditionSearch()"><i class="layui-icon layui-icon-search"></i>查询</button>
                        </div>
                    </div>
                </form>

            </div>
        </div>
        <div class="layui-row grid-demo grid-demo-bg1">
            <div class="layui-col-md12">
<!--                <div class="myThesis" style="display:none;margin-top: 140px;">
                    <div class="layui-btn-group demoTable" id="myTToolbar" style="display: none">
                        <button class="layui-btn layui-btn-normal layui-btn-sm " lay-event="add">添加</button>
                        <button class="layui-btn layui-btn-sm layui-btn-danger" lay-event="delete">批量删除</button>
                    </div>
                    <div id="addTContainer" style="display: none;width: 500px" >
                        <form class="layui-form" style="margin:30px" id="addTDetail">
                            <div class="layui-form-item">
                                <label class="layui-form-label" >名称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="softwareName" id="softwareName" required>
                                </div>
                            </div>
                            <div class="layui-form-item" style="display: none">
                                <label class="layui-form-label" >成果类型</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" value= "0205" name="resultTypeId " id="aresultTypeId " required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >项目ID</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="projectId" id="projectId" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">作者</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="aauthor" id="aauthor" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >网址</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="webSite" id="webSite">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">作者排名</label>
                                <div class="layui-input-block">
                                    <select name="pauthorType" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择作者排名</option>
                                        <option value="1101" >第一作者</option>
                                        <option value="1102" >第二作者</option>
                                        <option value="1103" >第二作者</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">发布日期</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="publishTime" id="publishTime" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>
                            </div>
                            <div class="layui-form-item" align="center">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" onclick="addDetail()">确认添加</button>
                            </div>
                        </form>
                    </div>
                    <table class="layui-table"  id='TTable' lay-filter="TTable" style="margin-top: -5px"></table>
&lt;!&ndash;                    <table class="layui-table" id="mytable" style="margin: 20px">
                        <thead >
                        <tr >
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">论文名称</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">论文类型</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="display: none">类型ID</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">上传人</th>
                            <th style="text-align: center;">作者</th>
                            <th style="text-align: center;">备注</th>
                            <th style="text-align: center;">操作</th>
                        </tr>
                        </thead>
                        <tbody id="mytbody" align="center">
                        </tbody>
                    </table>
                    <div id="tpaging" style="text-align: center;"></div >
                    <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                        <legend>论文上传</legend>
                    </fieldset>
                    <div class="layui-upload" style="margin:20px;">
                        <form class="layui-form" action="" style="margin-top: 30px;" name="tfm">
                            <div class="layui-form-item">
                                <div class="layui-input-block layui-input-inline" style="display: none">
                                    <select name="tDID" lay-verify="required" >
                                        <option value="0202" selected>论文：0202</option>
                                    </select>
                                </div>
                                <div class="layui-input-block layui-input-inline" style="display: none" >//uid
                                    <input type="text" name="tuid" required  lay-verify="required" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 0px">
                                    <select name="ttype" lay-verify="required" >
                                        <option value="0">请选择论文类型</option>
                                        <option value="专题型" >专题型</option>
                                        <option value="论辩型" >论辩型</option>
                                        <option value="综述型" >综述型</option>
                                        <option value="综合型" >综合型</option>
                                    </select>
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                                    <input type="text" name="tname" required  lay-verify="required" placeholder="请输入论文名称" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;">
                                    <input type="text" name="tauthor" required  lay-verify="required" placeholder="请输入作者" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;width: 300px">
                                    <input type="text" name="tmemo"  placeholder="备注" class="layui-input" >
                                </div>
                            </div>
                        </form>
                        <button type="button" class="layui-btn layui-btn-normal" id="tchoosefile">选择文件</button>
                        <button type="button" class="layui-btn" id="tupload" >开始上传</button>
                        &lt;!&ndash;onclick="uploadfile(fm.typeID.value,fm.type.value,fm.name.value,fm.author.value,fm.memo.value)"&ndash;&gt;
                    </div>&ndash;&gt;
                </div>
                <div class="mySoftwareWork" style="margin-top: 140px;display:none;">
                    <div class="layui-btn-group demoTable" id="mySToolbar" style="display: none">
                        <button class="layui-btn layui-btn-normal layui-btn-sm " lay-event="add">添加</button>
                        <button class="layui-btn layui-btn-sm layui-btn-danger" lay-event="delete">批量删除</button>
                    </div>
                    <div id="addSContainer" style="display: none;width: 500px" >
                        <form class="layui-form" style="margin:30px" id="addSDetail">
                            <div class="layui-form-item">
                                <label class="layui-form-label" >名称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="softwareName" id="softwareName" required>
                                </div>
                            </div>
                            <div class="layui-form-item" style="display: none">
                                <label class="layui-form-label" >成果类型</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" value= "0205" name="resultTypeId " id="aresultTypeId " required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >项目ID</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="projectId" id="projectId" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">作者</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="aauthor" id="aauthor" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >网址</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="webSite" id="webSite">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">作者排名</label>
                                <div class="layui-input-block">
                                    <select name="pauthorType" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择作者排名</option>
                                        <option value="1101" >第一作者</option>
                                        <option value="1102" >第二作者</option>
                                        <option value="1103" >第二作者</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">发布日期</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="publishTime" id="publishTime" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>
                            </div>
                            <div class="layui-form-item" align="center">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" onclick="addDetail()">确认添加</button>
                            </div>
                        </form>
                    </div>
                    <table class="layui-table"  id='STable' lay-filter="STable" style="margin-top: -5px"></table>
&lt;!&ndash;                    <table class="layui-table" id="mystable" style="margin-left: 20px">
                        <thead >
                        <tr >
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">论文名称</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="display: none;">类型ID</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">上传人</th>
                            <th style="text-align: center;">作者</th>
                            <th style="text-align: center;">备注</th>
                            <th style="text-align: center;">操作</th>
                        </tr>
                        </thead>
                        <tbody id="mysbody" align="center">
                        </tbody>
                    </table>
                    <div id="spaging" style="text-align: center;"></div>
                    <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                        <legend>软著上传</legend>
                    </fieldset>
                    <div class="layui-upload" style="margin-top: 20px;margin-left: 20px;">
                        <form class="layui-form" action="" style="margin-top: 30px;" name="sfm">
                            <div class="layui-form-item">
                                <div class="layui-input-block layui-input-inline" style="display: none;">
                                    <select name="sDID" lay-verify="required" >
                                        <option value="0203" selected>软著：0203</option >
                                    </select>
                                </div>
                                <div class="layui-input-block layui-input-inline" style="display: none" >
                                    <input type="text" name="suid" required  lay-verify="required" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 0px">
                                    <input type="text" name="sname" required  lay-verify="required" placeholder="请输入软著名称" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;">
                                    <input type="text" name="sauthor" required  lay-verify="required" placeholder="请输入作者" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;">
                                    <input type="text" name="smemo"  placeholder="备注" class="layui-input" >
                                </div>
                            </div>
                        </form>
                        <button type="button" class="layui-btn layui-btn-normal" id="schoosefile">选择文件</button>
                        <button type="button" class="layui-btn" id="supload" >开始上传</button>
                    </div>&ndash;&gt;
                </div>
                <div class="myPatent" style="margin-top: 140px;display:none;">
                    &lt;!&ndash;表格&ndash;&gt;
                    <div class="layui-btn-group demoTable" id="myToolbar" style="display: none">
                        <button class="layui-btn layui-btn-normal layui-btn-sm " lay-event="add">添加</button>
                        <button class="layui-btn layui-btn-sm layui-btn-danger" lay-event="delete">批量删除</button>
                    </div>
                    <div id="addContainer" style="display: none;width: 500px" >
                        <form class="layui-form" style="margin:30px" id="addDetail">
                            <div class="layui-form-item">
                                <label class="layui-form-label"  style="width: 100px">专利名称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="pname" id="pname" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >项目ID</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="pprojectId" id="pprojectId" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">作者</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="pauthor" id="pauthor" required>
                                </div>
                            </div>

                            <div class="layui-form-item">
                                <label class="layui-form-label" >性别</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="pgender" id="pgender">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">作者单位</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="punit" id="punit">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">作者职称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="pprofession" id="pprofession">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">作者排名</label>
                                <div class="layui-input-block">
                                    <select name="pauthorType" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择作者排名</option>
                                        <option value="1101" >第一作者</option>
                                        <option value="1102" >第二作者</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">专利状态</label>
                                <div class="layui-input-block">
                                    <select name="pstatus" lay-verify="required" style="width: 400px"  id="pstatus">
                                        <option value="0">请选择专利状态</option>
                                        <option value="1401" >受理</option>
                                        <option value="1402" >授权</option>
                                        <option value="1403" >作废</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">文件类型</label>
                                <div class="layui-input-block">
                                    <select name="ptype" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择文件类型</option>
                                        <option value="1201" >交底说明书</option>
                                        <option value="1202" >受理通知书</option>
                                        <option value="1203" >设计文档</option>
                                        <option value="1204" >其他</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">专利状态</label>
                                <div class="layui-input-block">
                                    <select name="ptypeID" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择作者排名</option>
                                        <option value="1301" >团队内</option>
                                        <option value="1302" >团队外</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">代理公司</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="pagency" id="pagency">
                                </div>
                            </div>

                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">申请日期</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="sqtime" id="sqtime" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>
                            </div><div class="layui-form-item">
                            <label class="layui-form-label" style="width: 100px">受理日期</label>
                            <div class="layui-input-block">
                                <input class="layui-input" type="text"  style="width: 350px" name="sltime" id="sltime" onfocus="(this.type='date')" onblur="(this.type='text')">
                            </div>
                        </div><div class="layui-form-item">
                            <label class="layui-form-label" style="width: 100px">授权日期</label>
                            <div class="layui-input-block">
                                <input class="layui-input" type="text"  style="width: 350px" name="granttime" id="granttime" onfocus="(this.type='date')" onblur="(this.type='text')">
                            </div>
                        </div>
                            <div class="layui-form-item" align="center">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" onclick="addDetail()">确认添加</button>
                            </div>
                        </form>
                    </div>
                    <div id="editContainer" style="display: none">
                        <form class="layui-form" style="margin:30px" id="editDetail">
                            <div class="layui-form-item">
                                <label class="layui-form-label">所属基本类型编号</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text" value="" style="width: 350px" name="bid" id="bids" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">所属基本类型</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text" value="" style="width: 350px" name="bid" id="bnames" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">详细类型编号</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text" value="" style="width: 350px" name="did" id="dids" required readonly>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">详细类型名称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text" value="" style="width: 350px" name="dname" id="dnames" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">备注</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text" value="" style="width: 350px" name="memo" id="memos">
                                </div>
                            </div>
                            <div class="layui-form-item" align="center">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" onclick="editDetail()">提交修改</button>
                            </div>
                        </form>
                    </div>
                    <table class="layui-table"  id='detailTable' lay-filter="detailTable" style="margin-top: -5px"></table>
                </div>
                &lt;!&ndash;    <table class="layui-table" id="myptable" lay-filter="videoTable" style="margin: 25px;">
&lt;!&ndash;                        <colgroup>
                            <col width="150">
                            <col width="200">
                            <col>
                        </colgroup>
                        <thead >
                        <tr >
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">专利名称</th>
                            <th style="text-align: center;">作者</th>
                            <th style="text-align: center;">状态</th>
                            <th style="text-align: center;">代理公司</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">申请日期</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">受理日期</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">授权日期</th>
                            <th style="text-align: center;">操作</th>
                        </tr>
                        </thead>
                        <tbody id="mypbody" align="center">
                        </tbody>&ndash;&gt;
                    </table>&ndash;&gt;&lt;!&ndash;                    <div id="ppaging" style="text-align: center;"></div>
                    <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 20px;">
                        <legend>专利上传</legend>
                    </fieldset>
                    <div class="layui-upload" style="margin-top: 20px;margin-left: 20px;">
                        <form class="layui-form" action="" style="margin-top: 20px;" name="pfm">
                            <div class="layui-form-item">
                                <div class="layui-input-block layui-input-inline" style="display: none;">
                                    <select name="pDID" lay-verify="required" >
                                        <option value="0201" selected>专利：0201</option>
                                    </select>
                                </div>
                              &lt;!&ndash;  <div class="layui-input-block layui-input-inline" style="display: none" >
                                    <input type="text" name="puid" required  lay-verify="required" >
                                </div>&ndash;&gt;
                                <div class="layui-input-block layui-input-inline" style="margin-left: 0px">
                                    <input type="text" name="pname" required  lay-verify="required" placeholder="请输入专利名称" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                                    <input type="text" name="pprojectID" required  lay-verify="required" placeholder="请输入项目ID" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                                    <input type="text" name="pagency"  placeholder="请输入代理公司" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;">

                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;">
                                    <select name="ptype" lay-verify="required" >
                                        <option value="0">请选择文件类型</option>
                                        <option value="1201" >交底说明书</option>
                                        <option value="1202" >受理通知书</option>
                                        <option value="1203" >设计文档</option>
                                        <option value="1204" >其他</option>
                                    </select>
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 0px;margin-top: 10px;">
                                    <input type="text" name="pauthor"  required  lay-verify="required" placeholder="请输入作者" class="layui-input">
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;margin-top: 10px;">
                                    <input type="text" name="pgender" required  lay-verify="required" placeholder="请输入性别" class="layui-input">
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;margin-top: 10px;">

                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;margin-top: 10px;">
                                    <input type="text" name="punit" required  lay-verify="required" placeholder="请输入作者单位" class="layui-input">
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;margin-top: 10px;">
                                    <input type="text" name="pprofession" required  lay-verify="required" placeholder="请输入作者职称" class="layui-input">
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 0px;margin-top: 10px;">

                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;margin-top: 10px;">
                                    <input type="text" id="sqdate" name="sqtime"  placeholder="请选择申请日期"  class="layui-input" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>

                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;margin-top: 10px;">
                                    <input type="text" id="sldate" name="sltime"  placeholder="请选择受理日期"  class="layui-input" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>

                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;margin-top: 10px;">
                                    <input type="text" id="grantdate" name="granttime"  placeholder="请选择授权日期" class="layui-input" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>
                            </div>
                        </form>
                      &lt;!&ndash;  <button type="button" class="layui-btn layui-btn-normal" id="pchoosefile">选择文件</button>
                        <button type="button" class="layui-btn" id="pupload" >开始上传</button>&ndash;&gt;
                    </div>&ndash;&gt;
                <div class="myWriting" style="margin-top: 140px;display:none;">
                    <div class="layui-btn-group demoTable" id="myWToolbar" style="display: none">
                        <button class="layui-btn layui-btn-normal layui-btn-sm " lay-event="add">添加</button>
                        <button class="layui-btn layui-btn-sm layui-btn-danger" lay-event="delete">批量删除</button>
                    </div>
                    <div id="addWContainer" style="display: none;width: 500px" >
                        <form class="layui-form" style="margin:30px" id="addWDetail">
                            <div class="layui-form-item">
                                <label class="layui-form-label" >名称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="softwareName" id="softwareName" required>
                                </div>
                            </div>
                            <div class="layui-form-item" style="display: none">
                                <label class="layui-form-label" >成果类型</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" value= "0205" name="resultTypeId " id="aresultTypeId " required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >项目ID</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="projectId" id="projectId" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">作者</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="aauthor" id="aauthor" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >网址</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="webSite" id="webSite">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">作者排名</label>
                                <div class="layui-input-block">
                                    <select name="pauthorType" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择作者排名</option>
                                        <option value="1101" >第一作者</option>
                                        <option value="1102" >第二作者</option>
                                        <option value="1103" >第二作者</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">发布日期</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="publishTime" id="publishTime" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>
                            </div>
                            <div class="layui-form-item" align="center">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" onclick="addDetail()">确认添加</button>
                            </div>
                        </form>
                    </div>
                    <table class="layui-table"  id='WTable' lay-filter="WTable" style="margin-top: -5px"></table>
&lt;!&ndash;                    <table class="layui-table" id="mywtable" style="margin-left: 20px;">
                        <thead >
                        <tr >
                            <th lay-data="{field:'stock',sort: true,align:'center'}"style="text-align: center;">书籍名称</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}"style="text-align: center;">书籍类型</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="display: none">类型ID</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}"style="text-align: center;">上传人</th>
                            <th style="text-align: center;">作者</th>
                            <th style="text-align: center;">备注</th>
                            <th style="text-align: center;">操作</th>
                        </tr>
                        </thead>
                        <tbody id="mywbody" align="center">
                        </tbody>
                    </table>
                    <div id="wpaging" style="text-align: center;"></div>
                    <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                        <legend>书籍上传</legend>
                    </fieldset>
                    <div class="layui-upload" style="margin-top: 20px;margin-left: 20px;">
                        <form class="layui-form" action="" style="margin-top: 30px;" name="wfm" >
                            <div class="layui-form-item">
                                <div class="layui-input-block layui-input-inline" style="display:none;">
                                    <select name="wDID" lay-verify="required" >
                                        <option value="0204" selected>书籍：0204</option>
                                    </select>
                                </div>
                                <div class="layui-input-block layui-input-inline" style="display: none" >
                                    <input type="text" name="wuid" required  lay-verify="required" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 0px">
                                    <select name="wtype" lay-verify="required" >
                                        <option value="0">请选择书籍类型</option>
                                        <option value="专著" >专著</option>
                                        <option value="独著" >独著</option>
                                        <option value="合著" >合著</option>
                                    </select>
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                                    <input type="text" name="wname" required  lay-verify="required" placeholder="请输入书籍名称" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;">
                                    <input type="text" name="wauthor" required  lay-verify="required" placeholder="请输入作者" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px;;width: 300px">
                                    <input type="text" name="wmemo"  placeholder="备注" class="layui-input" >
                                </div>
                            </div>
                        </form>
                        <button type="button" class="layui-btn layui-btn-normal" id="wchoosefile">选择文件</button>
                        <button type="button" class="layui-btn" id="wupload" >开始上传</button>
                    </div>&ndash;&gt;
                </div>-->
                <div class="myAward" style="margin-top: 140px;display:none;" >
                    <div class="layui-btn-group demoTable" id="myAWToolbar" style="display: none">
                        <button class="layui-btn layui-btn-normal layui-btn-sm " lay-event="add">添加</button>
                        <button class="layui-btn layui-btn-sm layui-btn-danger" lay-event="delete">批量删除</button>
                    </div>
                    <div id="addAWContainer" style="display: none;width: 500px" >
                        <form class="layui-form" style="margin:30px" id="addAWDetail">
                            <div class="layui-form-item">
                                <label class="layui-form-label" >项目ID</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="PROJECT_ID" id="PROJECT_ID" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >名称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="AWARD_NAME" id="AWARD_NAME" required>
                                </div>
                            </div>
                            <div class="layui-form-item" style="display: none">
                                <label class="layui-form-label" >颁奖单位</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" value= "0205" name="AWARD_UNIT " id="AWARD_UNIT " required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">颁奖时间</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="AWARD_TIME" id="AWARD_TIME" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">名次</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="RANKING" id="RANKING" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >获奖人</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="NAME" id="NAME">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">获奖人性别</label>
                                <div class="layui-input-block">
                                    <select name="TYPE_ID" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择性别</option>
                                        <option value="0101" >男</option>
                                        <option value="0102" >女</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">获奖人类型ID</label>
                                <div class="layui-input-block">
                                    <select name="TYPE_ID" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择获奖人类型</option>
                                        <option value="1301" >团队内</option>
                                        <option value="1302" >团队外</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">获奖人职称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="PROFESSIONAL_TITLE" id="PROFESSIONAL_TITLE">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">获奖人单位</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="UNIT" id="UNIT">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 100px">获奖人排名</label>
                                <div class="layui-input-block">
                                    <select name="pauthorType" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择获奖人排名</option>
                                        <option value="1101" >第一获奖人</option>
                                        <option value="1102" >第二获奖人</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item" style="display: none">
                                <label class="layui-form-label" >成果类型</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  value="0205" style="width: 350px" name="RESULT_TYPE_ID" id="RESULT_TYPE_ID">
                                </div>
                            </div>
                            <div class="layui-form-item" align="center">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" onclick="addDetail()">确认添加</button>
                            </div>
                        </form>
                    </div>
                    <table class="layui-table"  id='AWTable' lay-filter="AWTable" style="margin-top: -5px"></table>
                </div>
                <div class="myApp" style="margin-top: 140px;display: block">
                    <div class="layui-btn-group demoTable" id="myAToolbar" style="display: none">
                        <button class="layui-btn layui-btn-normal layui-btn-sm " lay-event="add">添加</button>
                        <button class="layui-btn layui-btn-sm layui-btn-danger" lay-event="delete">批量删除</button>
                    </div>
                    <div id="addAContainer" style="display: none;width: 500px" >
                        <form class="layui-form" style="margin:30px" id="addADetail" name="addADetail">
                            <div class="layui-form-item">
                                <label class="layui-form-label" >项目ID</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="projectId" id="projectId" required="required">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">发布日期</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="publishTime" id="publishTime"  required="required" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >名称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="softwareName" id="softwareName" required="required">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >网址</label>
                                <div class="layui-input-block">

                                    <input class="layui-input" type="text"  style="width: 350px" name="webSite" id="webSite" required="required">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">作者</label>
                                <div class="layui-input-block">
                                    <select name="wid" id="awid" lay-verify="required" style="width: 350px" required="required">
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">作者排名</label>
                                <div class="layui-input-block">
                                    <select name="writerTypeId"id="aorder" lay-verify="required" style="width: 350px">
                                        <option >请选择作者排名</option>
                                        <option value="1101" >第一作者</option>
                                        <option value="1102" >第二作者</option>
                                        <option value="1103" >第二作者</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item" align="center">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" onclick="addInfo();addCode()">添加作者信息</button>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">作者信息</label>
                                <div class="layui-input-block" >
                                    <textarea name="winfo" id="awinfo" lay-verify="required" style="width: 350px" ></textarea>
                                </div>
                            </div>
                            <div class="layui-form-item" style="display: none">
                                <label class="layui-form-label" style="width: 90px">码信息</label>
                                <div class="layui-input-block" >
                                    <textarea name="detailInfo" id="detailInfo" lay-verify="required" style="width: 350px" ></textarea>
                                </div>
                            </div>
                            <div class="layui-form-item" align="center">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" onclick="addDetail()">提交</button>
                            </div>
                        </form>
                    </div>
                    <table class="layui-table"  id='ATable' lay-filter="ATable" style="margin-top: -5px"></table>
                </div>
                <div class="myReport" style="margin-top: 140px;display:none;">
                    <!--<table class="layui-table" id="myrtable" style="margin-left: 20px;">
                        <colgroup>
                            <col width="150">
                            <col width="200">
                            <col>
                        </colgroup>
                        <thead >
                        <tr >
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">报告名称</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">撰写人</th>
                            <th lay-data="{field:'stock',sort: true,align:'center'}" style="text-align: center;">撰写时间</th>
                            <th style="text-align: center;">操作</th>
                        </tr>
                        </thead>
                        <tbody id="myrbody" align="center">
                        </tbody>
                    </table>
                    <div id="rpaging" style="text-align: center;"></div>
                    <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
                        <legend>报告上传</legend>
                    </fieldset>
                    <div class="layui-upload" style="margin-top: 20px;margin-left: 20px;">
                        <form class="layui-form" action="" style="margin-top: 30px;" name="appfm">
                            <div class="layui-form-item">
                                <div class="layui-input-block layui-input-inline" style="display: none;">
                                    <select name="rDID" lay-verify="required" >
                                        <option value="0207" selected>报告：0207</option>
                                    </select>
                                </div>
                                <div class="layui-input-block layui-input-inline" style="display: none" >
                                    <input type="text" name="ruid" required  lay-verify="required" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 0px">
                                    <input type="text" name="rname" required  lay-verify="required" placeholder="请输入报告名称" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="margin-left: 20px">
                                    <input type="text" name="rauthor"   placeholder="请输入撰写人" class="layui-input" >
                                </div>
                                <div class="layui-input-block layui-input-inline" style="width: 180px;height: 33px;margin-left: 20px">
                                    <input type="date" name="atime"  placeholder="请输入获奖时间"  style="width: 180px;height: 33px;">
                                </div>
                            </div>
                        </form>
                        <button type="button" class="layui-btn layui-btn-normal" id="rchoosefile">选择文件</button>
                        <button type="button" class="layui-btn" id="rupload" >开始上传</button>
                    </div>-->
                    <div class="layui-btn-group demoTable" id="myRToolbar" style="display: none">
                        <button class="layui-btn layui-btn-normal layui-btn-sm " lay-event="add">添加</button>
                        <button class="layui-btn layui-btn-sm layui-btn-danger" lay-event="delete">批量删除</button>
                    </div>
                    <div id="addRContainer" style="display: none;width: 500px" >
                        <form class="layui-form" style="margin:30px" id="addRDetail">
                            <div class="layui-form-item">
                                <label class="layui-form-label" >名称</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="projectResultName" id="projectResultName" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" >项目ID</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="projectId" id="rprojectId" required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">作者</label>
                                <div class="layui-input-block">
                                    <select name="writerId" id="writerId" lay-verify="required" style="width: 350px">
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item" style="display: none">
                                <label class="layui-form-label">成果类型</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" value="0207" name="resultTypeId " id="rresultTypeId " required>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">作者排名</label>
                                <div class="layui-input-block">
                                    <select name="writerTypeId" lay-verify="required" style="width: 350px">
                                        <option value="0">请选择作者排名</option>
                                        <option value="1101" >第一作者</option>
                                        <option value="1102" >第二作者</option>
                                        <option value="1103" >第二作者</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label" style="width: 90px">发布日期</label>
                                <div class="layui-input-block">
                                    <input class="layui-input" type="text"  style="width: 350px" name="writeTime" id="writeTime" onfocus="(this.type='date')" onblur="(this.type='text')">
                                </div>
                            </div>
                            <div class="layui-form-item" align="center">
                                <button type="button" class="layui-btn layui-btn-radius layui-btn-normal" onclick="addDetail()">确认添加</button>
                            </div>
                        </form>
                    </div>
                    <table class="layui-table"  id='RTable' lay-filter="RTable" style="margin-top: -5px"></table>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/html" id="handle">
    <a class="layui-btn layui-btn-xs layui-btn-blue" lay-event="upload" id="upload">上传</a>
    <a class="layui-btn layui-btn-xs layui-bg-orange" lay-event="download" id="download">下载</a>
    <a class="layui-btn layui-btn-xs layui-btn-danger" lay-event="del" id="delete">删除</a>
</script>

<!--论文-->
<script>
    var addlay,editlay;
    var http = 'http://148.70.243.66:8888';
    var getbid = location.search;
    var bybid = "";
    if(getbid){
        var cout = 0;
        for(var i=0;i<getbid.length;i++){
            if(cout!=0){
                bybid+=getbid.charAt(i);
            }
            if(getbid.charAt(i)==="="){
                cout = i;
            }
        }
    }
    layui.use('table', function() {
        var table = layui.table
            , form = layui.form;
        var $ = layui.$;

        function loadData(data) {//渲染表
            table.render({
                elem: '#TTable',
                data: data,
                cols: [[
                    {type: 'checkbox'},
                    {field: 'softwareName', title: '名称'},
                    {field: 'writers', title: '作者'},
                    {field: 'publishTime', title: '时间'},
                    {field: 'webSite', title: '网址'},
                    {field: '', title: '设计文档'}, //暂未显示
                    {fixed: 'right', title: '操作', templet: '#handle', align: 'center'}
                ]],
                page: true,
                toolbar: '#myWToolbar',

            })
        }

        //加载表数据
        function loadTable(){
            $.get(http+'/api/software/find',function (result) {
                console.log(result.data[0].writers)
                for(var i=0;i<result.data.length;i++){
                    result.data[i].webSite = "<a href=`result.data[i].webSite`>" + result.data[i].webSite + "</a>"
                    /*   console.log(result.data[i].webSite)*/
                    var authorinfo = ''
                    for(var j=0;j<result.data[i].writers.length;j++){
                        authorinfo += result.data[i].writers[j].name + ":" + result.data[i].writers[j].gender +","+ result.data[i].writers[j].unit +","+ result.data[i].writers[j].typeName +","+ result.data[i].writers[j].professionalTitle +","+ result.data[i].writers[j].writerType+"。"+ " <br>"
                    }
                    result.data[i].writers = authorinfo
                }
                loadData(result.data);
            });
        }
        loadTable()
        //模糊查询
        function conditionSearch(){
            $.get(http+"/api/dc/findThesis",{PATENT_NAME:pform.ptitle.value,AGENCY_COMPANY:pform.pagency.value},function (result) {
                loadData(data.data);
            })
        }


        //重载
        $('#find').click(function () {
            var did = $('#search').val();
            if (did.length != 0) {
                $.post(http+'/api/DetailType/findById', {"did": did}, function (data) {
                    if(data.data==null){
                        layer.msg('没有找到该详细类型')
                    }
                    else{
                        var myData = [];
                        myData.push(data.data);
                        loadData(myData);
                    }
                })
            } else {
                loadTable();
            }
        });
        //回车重载
        $('#search').on('keypress',function (event) {
            if(event.keyCode==13){
                $('#find').click();
            }
        });
        //回车添加
        $('#addTContainer').on('keypress',function (event) {
            if(event.keyCode==13){
                addDetail();
            }
        });

        //监听头工具栏事件（添加、批量删除）
        table.on('toolbar(ATable)', function(obj){
            var checkStatus = table.checkStatus(obj.config.id)
                ,data = checkStatus.data; //获取选中的数据
            switch(obj.event){
                case 'add':
                    addlay = layer.open({
                        type: 1,
                        title: '添加软件信息',
                        area: ['80%', '70%'],
                        content: $('#addTContainer'),
                        end: function () {
                            loadTable();
                        }
                    });
                    break;
                case 'delete':
                    if(data.length === 0){
                        layer.msg('请选择一行');
                    } else {
                        //删除
                        var dids = "";
                        for(var i=0;i<data.length;i++){
                            if(i!=data.length-1){
                                dids+=data[i].uuid+",";
                            }
                            else{
                                dids+=data[i].uuid
                            }
                        }
                        $.get(http+'/api/software/delete',{"uuid":dids},function () {
                            loadTable();
                        })
                    }
                    break;
            }
        });
        //单个删除/下载
        table.on('tool(ATable)', function(obj) {
            var data = obj.data;
            console.log(data)
            if (obj.event === 'del') {
                layer.confirm('确认删除吗？', {title: '删除'}, function (index) {
                    obj.del();
                    $.post(http+'/api/dc/thesisDeleteByUuid', {"uuid": data.uuid}, function () {
                        layui.use('layer', function(){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '删除成功! '  + "</h3>",{title:"温馨提示"});
                            setTimeout(function(){
                                //刷新
                                location.reload();
                            },1000);
                        });
                    });
                    layer.close(index);
                });
            }
            if(obj.event === 'download'){
                layer.confirm('请选择下载文件！', {
                    title: "Tips" ,btnAlign: 'c',
                    btn: ['设计文档下载', '相关文件下载','取消']
                    ,btn3: function(index, layero){
                        close()
                    }
                }, function(index, layero){
                    $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1205"}, function (result) {
                        if(result.status =="success"){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                        }
                    })
                }, function(index){
                    //按钮二的回调
                    $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1204"}, function (result) {
                        if(result.status =="success"){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                        }
                    })
                });
            }
            /*             if(obj.event === 'query'){
                            var a = $('#query');
                            a.attr('href','')
                        }*/
        });
    });
    var DataDeal = {
        //将从form中通过$('#refer').serialize()获取的值转成json
        formToJson: function (data) {
            data=data.replace(/&/g,"\",\"");
            data=data.replace(/=/g,"\":\"");
            data="{\""+data+"\"}";
            return data;
        }
    };


    //提交添加表单
    function addDetail() {
        var $ = layui.$;
        var formData = $('#addTDetail').serialize();
        formData= decodeURIComponent(formData,true);//防止中文乱码
        var jsondata=DataDeal.formToJson(formData);//转化为json
        console.log(jsondata )
        console.log("aaaaaaaaaaaaaaaaaaaaa")
        $.ajax({
            type:'post',
            url: http+'/api/software/insert',
            data: formData,
            success: function (data) {
                layer.msg('添加成功');
                layer.close(addlay);
            },
            error: function (data) {
                layer.msg('错误码：'+data.status);
                layer.close(addlay);
            }
        })
    }


</script>
<!--<script>

    &lt;!&ndash;表单渲染&ndash;&gt;
    $(document).ready(function () {
        var ele = layui.element;
        ele.render();
    });
    layui.use('form', function(){
        var form = layui.form;
        form.render();
    });

    var http = "http://148.70.243.66:8888";

    function showtable(){
        $.get(http+"/api/dc/findThesis",{ttype:tform.ttype.value,tname:tform.ttitle.value,tauthor:tform.tauthor.value},function (result) {
            console.log(result)
            for (var i=0;i<result.data.length;i++){
                if(result.data[i].MEMO == null){
                    result.data[i].MEMO ="";
                }
            }
            var str = ''
            for (var i=0;i<result.data.length;i++){
                str += '<tr>';
                var tds = '<td>' + result.data[i].TNAME + '</td>'
                    + '<td>' + result.data[i].TTYPE + '</td>'
                    + '<td style="display: none">' + result.data[i].DID + '</td>'
                    + '<td>' + result.data[i].UID + '</td>'
                    + '<td>' + result.data[i].TAUTHOR + '</td>'
                    + '<td>' + result.data[i].MEMO + '</td>'
                    + '<td>' +
                    /*   '<button data-method="notice"  class="layui-btn edit" ><i class="layui-icon layui-icon-edit"></i>编辑</button>' +*/
                    '<button data-method="notice"  class="layui-btn layui-btn-normal  download" onclick="downloadFile(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-download-circle"></i>相关文件下载</button>' +
                    '<button data-method="notice"  class=" layui-btn layui-btn-danger delete" onclick="del(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-delete"></i>删除</button>' +
                    '</td>';
                str += tds ;
                str += '</tr>';
            }
            $("#mytbody").html(str)

            var selectStr = ''
            var arr = []
            selectStr += ' <option>'+"请选择论文类型"+'</option>';
            for (var i=0;i<result.data.length;i++){
                if(arr.indexOf(result.data[i].TTYPE) == -1){
                    arr.push(result.data[i].TTYPE)
                    var ops = ' <option value='+result.data[i].TTYPE+'>'+ result.data[i].TTYPE +'</option>'
                    selectStr += ops
                }
            }
            $("#myttype").html(selectStr)
            layui.use('form', function(){//需要再次渲染form才能在界面显示
                var form = layui.form;
                form.render();
            });
        })
    }
    window.onload = showtable;


    //条件（模糊）查询
    function conditionSearch(){
        console.log(tform.ttype.value)
        console.log(tform.ttitle.value)
        console.log(tform.tauthor.value)
        $.get(http+"/api/dc/findThesis",{ttype:tform.ttype.value,tname:tform.ttitle.value,tauthor:tform.tauthor.value},function (result) {
            console.log(result)
            if(result.data.length>0){
                for (var i=0;i<result.data.length;i++){
                    if(result.data[i].MEMO == null){
                        result.data[i].MEMO ="";
                    }
                }
                var str1 = ''
                for (var i=0;i<result.data.length;i++){
                    str1 += '<tr>';
                    var ctds = '<td>' + result.data[i].TNAME + '</td>'
                        + '<td>' + result.data[i].TTYPE + '</td>'
                        + '<td style="display: none">' + result.data[i].DID + '</td>'
                        + '<td>' + result.data[i].UID + '</td>'
                        + '<td>' + result.data[i].TAUTHOR + '</td>'
                        + '<td>' + result.data[i].MEMO + '</td>'
                        + '<td>' +
                        /* '<button data-method="notice"  class="layui-btn edit" ><i class="layui-icon layui-icon-edit"></i>编辑</button>' +*/
                        '<button data-method="notice"  class="layui-btn layui-btn-normal  download" onclick="downloadFile(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-download-circle"></i>相关文件下载</button>' +
                        '<button data-method="notice"  class=" layui-btn layui-btn-danger delete" onclick="del(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-delete"></i>删除</button>' +
                        '</td>';
                    str1 += ctds ;
                    str1 += '</tr>';
                }
                $("#mytbody").html(str1)
            }else{
                var tips = '<tr align="center">'+'<td colspan="6">'+" 没有符合条件的信息！"+'</td>'+'</tr>'
                $("#mytbody").html(tips)
            }
        })
    }

    //下载相关文件
    function downloadFile(UUID){
        layer.confirm("确认下载？", { title: "Tips",btn: ['确定','取消'] }, function (index) {
            $.get(http+"/api/dc/thesisDownload",{uuid:UUID},function (result) {
                {
                    layer.msg(result.msg, {icon: -1, shade: 0.3, offset: '40%', time: 2000});
                    console.log(result)
                    //layer.close(index); //如果设定了yes回调，需进行手工关闭
                }
            });
        });
    }

    &lt;!&ndash;删除&ndash;&gt;
    layui.use('layer', function(){
        var $ = layui.jquery;
    });

    function del(uuid){
        /*  console.log(uuid)*/
        layer.confirm("确认删除?", { title: "Tips" ,btn: ['确定','取消']}, function (index) {
            $.post(http+"/api/dc/thesisDeleteByUuid", { uuid: uuid}, function (data)
            {
                layer.msg(data.msg,{icon:-1,shade:0.3,offset: '40%',time:2000});
                //layer.close(index); //如果设定了yes回调，需进行手工关闭
                setTimeout(function(){
                    //刷新
                    location.reload();
                },500);
            });
        });

        /*        //如果没当前用户为学生，则隐藏编辑和删除按钮
                $('.edit').addClass('layui-hide');
                $('.delete').addClass('layui-hide');*/
    }
    /*   //获取uid
        $("#choosefile").on('click',function (){
     /!*       $.ajaxSetup({
                async: false
            });*!/
            $.post(http+"/userLogin",{username:"qwe",password:"qweasd"},function (result) {
                /!*console.log(result.data.uid)
                console.log(typeof result.data.uid)*!/
                fm.uid.value=""
                fm.uid.value=result.data.uid
            })
        })*/

    //文件上传
    $("#tupload").on('click',function () {
        file.config.data = {
            DID:tfm.tDID.value,
            UID:window.sessionStorage.getItem("uid"), //利用sessionstorage获取uid
            TTYPE:tfm.ttype.value,
            TNAME:tfm.tname.value,
            TAUTHOR:tfm.tauthor.value,
            MEMO:tfm.tmemo.value
        }
    })

    var upload = layui.upload,
        element = layui.element;
    element.init();

    file = upload.render({
        elem: '#tchoosefile'
        ,url: http + "/api/dc/ThesisUpload"
        ,accept: 'file' //允许上传的文件类型
        ,auto: false
        //,multiple: true
        ,bindAction: '#tupload'
        ,done: function(res){
            layui.use('layer', function(){
                var layer = layui.layer;
                layer.alert("<h2 style='color:black'>" + '上传成功！' + "</h2>",{title: "Tips"});
                setTimeout(function(){
                    //刷新
                    location.reload();
                },1000);
            });
            console.log(res)  //返回对象数据
        }
    })

    //分页
    layui.use(['laypage', 'layer'], function(){
        var laypage = layui.laypage
            ,layer = layui.layer;

        laypage.render({
            elem: 'tpaging'
            ,count: 10
            ,layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip']
            ,jump: function(obj){
                /*            console.log(obj)
                            console.log(obj.curr)  //当前页号
                            console.log(obj.limit); //得到每页显示的条数*/
            }
        });
    });
</script>-->

<!--软著-->
<script>
    var addlay,editlay;
    var http = 'http://148.70.243.66:8888';
    var getbid = location.search;
    var bybid = "";
    if(getbid){
        var cout = 0;
        for(var i=0;i<getbid.length;i++){
            if(cout!=0){
                bybid+=getbid.charAt(i);
            }
            if(getbid.charAt(i)==="="){
                cout = i;
            }
        }
    }
    layui.use('table', function() {
        var table = layui.table
            , form = layui.form;
        var $ = layui.$;

        function loadData(data) {//渲染表
            table.render({
                elem: '#STable',
                data: data,
                cols: [[
                    {type: 'checkbox'},
                    {field: 'softwareName', title: '名称'},
                    {field: 'writers', title: '作者'},
                    {field: 'publishTime', title: '时间'},
                    {field: 'webSite', title: '网址'},
                    {field: '', title: '设计文档', sort: true}, //暂未显示
                    {fixed: 'right', title: '操作', templet: '#handle', align: 'center'}
                ]],
                page: true,
                toolbar: '#myWToolbar',

            })
        }

        //加载表数据
        function loadTable(){
            $.get(http+'/api/software/find',function (result) {
                console.log(result.data[0].writers)
                for(var i=0;i<result.data.length;i++){
                    result.data[i].webSite = "<a href=`result.data[i].webSite`>" + result.data[i].webSite + "</a>"
                    /*   console.log(result.data[i].webSite)*/
                    var authorinfo = ''
                    for(var j=0;j<result.data[i].writers.length;j++){
                        authorinfo += result.data[i].writers[j].name + ":" + result.data[i].writers[j].gender +","+ result.data[i].writers[j].unit +","+ result.data[i].writers[j].typeName +","+ result.data[i].writers[j].professionalTitle +","+ result.data[i].writers[j].writerType+"。"+ " <br>"
                    }
                    result.data[i].writers = authorinfo
                }
                loadData(result.data);
            });
        }
        loadTable()
        //模糊查询
        function conditionSearch(){
            $.get(http+"/api/dc/findThesis",{PATENT_NAME:pform.ptitle.value,AGENCY_COMPANY:pform.pagency.value},function (result) {
                loadData(data.data);
            })
        }


        //重载
        $('#find').click(function () {
            var did = $('#search').val();
            if (did.length != 0) {
                $.post(http+'/api/DetailType/findById', {"did": did}, function (data) {
                    if(data.data==null){
                        layer.msg('没有找到该详细类型')
                    }
                    else{
                        var myData = [];
                        myData.push(data.data);
                        loadData(myData);
                    }
                })
            } else {
                loadTable();
            }
        });
        //回车重载
        $('#search').on('keypress',function (event) {
            if(event.keyCode==13){
                $('#find').click();
            }
        });
        //回车添加
        $('#addSContainer').on('keypress',function (event) {
            if(event.keyCode==13){
                addDetail();
            }
        });

        //监听头工具栏事件（添加、批量删除）
        table.on('toolbar(ATable)', function(obj){
            var checkStatus = table.checkStatus(obj.config.id)
                ,data = checkStatus.data; //获取选中的数据
            switch(obj.event){
                case 'add':
                    addlay = layer.open({
                        type: 1,
                        title: '添加软件信息',
                        area: ['80%', '70%'],
                        content: $('#addSContainer'),
                        end: function () {
                            loadTable();
                        }
                    });
                    break;
                case 'delete':
                    if(data.length === 0){
                        layer.msg('请选择一行');
                    } else {
                        //删除
                        var dids = "";
                        for(var i=0;i<data.length;i++){
                            if(i!=data.length-1){
                                dids+=data[i].uuid+",";
                            }
                            else{
                                dids+=data[i].uuid
                            }
                        }
                        $.get(http+'/api/software/delete',{"uuid":dids},function () {
                            loadTable();
                        })
                    }
                    break;
            }
        });
        //单个删除/下载
        table.on('tool(ATable)', function(obj) {
            var data = obj.data;
            console.log(data)
            if (obj.event === 'del') {
                layer.confirm('确认删除吗？', {title: '删除'}, function (index) {
                    obj.del();
                    $.post(http+'/api/dc/software_workDeleteByUuid', {"uuid": data.uuid}, function () {
                        layui.use('layer', function(){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '删除成功! '  + "</h3>",{title:"温馨提示"});
                            setTimeout(function(){
                                //刷新
                                location.reload();
                            },1000);
                        });
                    });
                    layer.close(index);
                });
            }
            if(obj.event === 'download'){
                layer.confirm('请选择下载文件！', {
                    title: "Tips" ,btnAlign: 'c',
                    btn: ['设计文档下载', '相关文件下载','取消']
                    ,btn3: function(index, layero){
                        close()
                    }
                }, function(index, layero){
                    $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1205"}, function (result) {
                        if(result.status =="success"){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                        }
                    })
                }, function(index){
                    //按钮二的回调
                    $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1204"}, function (result) {
                        if(result.status =="success"){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                        }
                    })
                });
            }
            /*             if(obj.event === 'query'){
                            var a = $('#query');
                            a.attr('href','')
                        }*/
        });
    });
    var DataDeal = {
        //将从form中通过$('#refer').serialize()获取的值转成json
        formToJson: function (data) {
            data=data.replace(/&/g,"\",\"");
            data=data.replace(/=/g,"\":\"");
            data="{\""+data+"\"}";
            return data;
        }
    };

    //提交添加表单
    function addDetail() {
        var $ = layui.$;
        var formData = $('#addSDetail').serialize();
        formData= decodeURIComponent(formData,true);//防止中文乱码
        var jsondata=DataDeal.formToJson(formData);//转化为json
        console.log(jsondata )
        console.log("aaaaaaaaaaaaaaaaaaaaa")
        $.ajax({
            type:'post',
            url: http+'/api/software/insert',
            data: formData,
            success: function (data) {
                layer.msg('添加成功');
                layer.close(addlay);
            },
            error: function (data) {
                layer.msg('错误码：'+data.status);
                layer.close(addlay);
            }
        })
    }

</script>
<!--<script>
    &lt;!&ndash;表单渲染&ndash;&gt;
    $(document).ready(function () {
        var ele = layui.element;
        ele.render();
    });
    layui.use('form', function(){
        var form = layui.form;
        form.render();
    });

    var http = "http://148.70.243.66:8888";

    function showtable(){
        $.get(http+"/api/dc/findSoftware_work",function (result) {
            console.log(result)
            console.log(result.data.length)
            for (var i=0;i<result.data.length;i++){
                if(result.data[i].MEMO == null){
                    result.data[i].MEMO ="";
                }
            }
            var str = ''

            for (var i=0;i<result.data.length;i++){
                str += '<tr>';
                var tds = '<td>' + result.data[i].SNAME + '</td>'
                    + '<td style="display: none">' + result.data[i].DID + '</td>'
                    + '<td>' + result.data[i].UID + '</td>'
                    + '<td>' + result.data[i].SAUTHOR + '</td>'
                    + '<td>' + result.data[i].MEMO + '</td>'
                    + '<td>' +
                    /*  '<button data-method="notice"  class="layui-btn edit" ><i class="layui-icon layui-icon-edit"></i>编辑</button>' +*/
                    '<button data-method="notice"  class="layui-btn layui-btn-normal  download" onclick="downloadFile(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-download-circle"></i>相关文件下载</button>' +
                    '<button data-method="notice"  class=" layui-btn layui-btn-danger delete" onclick="del(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-delete"></i>删除</button>' +
                    '</td>';
                str += tds ;
                str += '</tr>';
            }

            $("#mysbody").html(str)
        })
    }
    window.onload = showtable;

    //条件（模糊）查询
    function conditionSearch(){
        $.get(http+"/api/dc/findSoftware_work",{sname:sform.stitle.value,sauthor:sform.sauthor.value},function (result) {
            console.log(result)
            if(result.data.length>0){
                for (var i=0;i<result.data.length;i++){
                    if(result.data[i].MEMO == null){
                        result.data[i].MEMO ="";
                    }
                }
                var str1 = ''
                for (var i=0;i<result.data.length;i++){
                    str1 += '<tr>';
                    var ctds = '<td>' + result.data[i].SNAME + '</td>'
                        + '<td style="display: none">' + result.data[i].DID + '</td>'
                        + '<td>' + result.data[i].UID + '</td>'
                        + '<td>' + result.data[i].SAUTHOR + '</td>'
                        + '<td>' + result.data[i].MEMO + '</td>'
                        + '<td>' +
                        /*           '<button data-method="notice"  class="layui-btn edit" ><i class="layui-icon layui-icon-edit"></i>编辑</button>' +*/
                        '<button data-method="notice"  class="layui-btn layui-btn-normal  download" onclick="downloadFile(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-download-circle"></i>相关文件下载</button>' +
                        '<button data-method="notice"  class=" layui-btn layui-btn-danger delete" onclick="del(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-delete"></i>删除</button>' +
                        '</td>';
                    str1 += ctds ;
                    str1 += '</tr>';
                }
                $("#mysbody").html(str1)
            }else{
                var tips = '<tr align="center">'+'<td colspan="6">'+" 没有符合条件的信息！"+'</td>'+'</tr>'
                $("#mysbody").html(tips)
            }
        })
    }

    //下载相关文件
    function downloadFile(UUID){
        layer.confirm("确认下载？", { title: "Tips",btn: ['确定','取消'] }, function (index) {
            $.get(http+"/api/dc/software_workDownload",{uuid:sUUID},function (result) {
                {
                    layer.msg(result.msg, {icon: -1, shade: 0.3, offset: '40%', time: 2000});
                    console.log(result)
                    //layer.close(index); //如果设定了yes回调，需进行手工关闭
                }
            });
        });
    }

    &lt;!&ndash;删除&ndash;&gt;
    layui.use('layer', function(){
        var $ = layui.jquery;
    });
    function del(uuid){
        /*  console.log(uuid)*/
        layer.confirm("确认删除?", { title: "Tips",btn: ['确定','取消'] }, function (index) {
            $.post(http+"/api/dc/software_workDeleteByUuid", { uuid: uuid}, function (data)
            {
                layer.msg(data.msg,{icon:-1,shade:0.3,offset: '40%',time:2000});
                //layer.close(index); //如果设定了yes回调，需进行手工关闭
                setTimeout(function(){
                    //刷新
                    location.reload();
                },500);
            });
        });

        /*        //如果没当前用户为学生，则隐藏编辑和删除按钮
                $('.edit').addClass('layui-hide');
                $('.delete').addClass('layui-hide');*/
    }

    //文件上传
    $("#supload").on('click',function () {
        file.config.data = {
            DID:sfm.sDID.value,
            UID:window.sessionStorage.getItem("uid"),
            SAUTHOR:sfm.sauthor.value,
            SNAME:sfm.sname.value,
            MEMO:sfm.smemo.value
        }
    })

    var upload = layui.upload,
        element = layui.element;
    element.init();

    file = upload.render({
        elem: '#schoosefile'
        ,url: http + "/api/dc/Software_workUpload"
        ,accept: 'file' //允许上传的文件类型
        ,auto: false
        //,multiple: true
        ,bindAction: '#supload'
        ,done: function(res){
            layui.use('layer', function(){
                var layer = layui.layer;
                layer.alert("<h2 style='color:black'>" + '上传成功！' + "</h2>",{title: "Tips"});
                setTimeout(function(){
                    //刷新
                    location.reload();
                },1000);
            });
            console.log(res)  //返回对象数据
        }
    })


    //分页
    layui.use(['laypage', 'layer'], function(){
        var laypage = layui.laypage
            ,layer = layui.layer;

        laypage.render({
            elem: 'spaging'
            ,count: 10
            ,layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip']
            ,jump: function(obj){
                console.log(obj)
                console.log(obj.curr)  //当前页号
                console.log(obj.limit); //得到每页显示的条数
            }
        });
    });

</script>-->

<!--专利-->
<!--<script>
    var addlay,editlay;
    var http = 'http://148.70.243.66:8888';
    var getbid = location.search;
    var bybid = "";
    if(getbid){
        var cout = 0;
        for(var i=0;i<getbid.length;i++){
            if(cout!=0){
                bybid+=getbid.charAt(i);
            }
            if(getbid.charAt(i)==="="){
                cout = i;
            }
        }
    }
    layui.use('table', function() {
        var table = layui.table
            , form = layui.form;
        var $ = layui.$;

        function loadData(data) {//渲染表
            table.render({
                elem: '#detailTable',
                data: data,
                cols: [[
                    {type: 'checkbox'},
                    {field: 'patent_NAME', title: '专利名称'},
                    {field: 'name', title: '作者'},
                    {field: 'dname', title: '状态'},
                    {field: 'dname', title: '代理公司'},
                    {field: 'application_TIME', title: '申请时间', sort: true},
                    {field: 'acceptance_TIME', title: '受理时间', sort: true},
                    {field: 'authorization_TIME', title: '授权时间', sort: true},
                    {fixed: 'right', title: '操作', templet: '#handle', align: 'center'}
                ]],
                page: true,
                toolbar: '#myToolbar',

            })
        }

        //加载表数据
        function loadTable(){
            $.get(http+'/api/dc/findPatent',function (data) {
                loadData(data.data);
            });
        }
        loadTable()
        //模糊查询
        function conditionSearch(){
            $.get(http+"/api/dc/findThesis",{PATENT_NAME:pform.ptitle.value,AGENCY_COMPANY:pform.pagency.value},function (result) {
                loadData(data.data);
            })
        }
        //下载相关文件
        function downloadFile(UUID){
            layer.confirm("确认下载？", { title: "Tips" ,btn: ['确定','取消']}, function (index) {
                $.get(http+"/api/dc/patentDownload",{uuid:UUID},function (result) {
                    {
                        layer.msg(result.msg, {icon: -1, shade: 0.3, offset: '40%', time: 2000});
                        console.log(result)
                        //layer.close(index); //如果设定了yes回调，需进行手工关闭
                    }
                });
            });
        }
  /*      function loadTableByBid(bid){
            /!*$.post(http+'/api/DetailType/findByBID',{"bid":bid},function (data) {
                loadData(data.data);
            });*!/
            $.ajax({
                type:'post',
                url: http+'/api/DetailType/findByBID',
                data: {"bid":bid},
                success: function (data) {
                    loadData(data.data);
                },
                error: function (error) {
                    layer.msg(error);
                }
            })
        }
        if(!getbid){
            loadTable();
        }
        else{
            loadTableByBid(bybid);
        }*/

        //重载
        $('#find').click(function () {
            var did = $('#search').val();
            if (did.length != 0) {
                $.post(http+'/api/DetailType/findById', {"did": did}, function (data) {
                    if(data.data==null){
                        layer.msg('没有找到该详细类型')
                    }
                    else{
                        var myData = [];
                        myData.push(data.data);
                        loadData(myData);
                    }
                })
            } else {
                loadTable();
            }
        });
        //回车重载
        $('#search').on('keypress',function (event) {
            if(event.keyCode==13){
                $('#find').click();
            }
        });
        //回车添加、编辑
        $('#addContainer').on('keypress',function (event) {
            if(event.keyCode==13){
                addDetail();
            }
        });
        $('#editContainer').on('keypress',function (event) {
            if(event.keyCode==13){
                editDetail();
            }
        });
        //监听头工具栏事件（添加、批量删除）
        table.on('toolbar(detailTable)', function(obj){
            var checkStatus = table.checkStatus(obj.config.id)
                ,data = checkStatus.data; //获取选中的数据
            switch(obj.event){
                case 'add':
                    addlay = layer.open({
                        type: 1,
                        title: '添加专利',
                        area: ['80%', '70%'],
                        content: $('#addContainer'),
                        end: function () {
                            loadTable();
                        }
                    });
                    break;
                case 'delete':
                    if(data.length === 0){
                        layer.msg('请选择一行');
                    } else {
                        //删除
                        var dids = "";
                        for(var i=0;i<data.length;i++){
                            if(i!=data.length-1){
                                dids+=data[i].did+",";
                            }
                            else{
                                dids+=data[i].did
                            }
                        }
                        $.post(http+'/api/DetailType/deleteById',{"dids":dids},function () {
                            loadTable();
                        })
                    }
                    break;
            }
        });
        //单个删除/编辑
        table.on('tool(detailTable)', function(obj) {
            var data = obj.data;
            //console.log(obj)
            if (obj.event === 'del') {
                layer.confirm('确认删除吗？', {title: '删除'}, function (index) {
                    obj.del();
                    $.post(http+'/api/dc/patentDeleteByUuid', {"uuid": data.uuid}, function () {
                        layui.use('layer', function(){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '删除成功! '  + "</h3>",{title:"温馨提示"});
                            setTimeout(function(){
                                //刷新
                                location.reload();
                            },1000);
                        });
                    });
                    layer.close(index);
                });
            }
        });
    });


    //提交添加表单
    function addDetail() {
        var $ = layui.$;
        var formData = $('#addDetail').serialize();
        /*$.post('http://148.70.243.66:8888/api/DetailType/insertDetailType',formData,function (data) {
            if(data.status){
                layer.msg(data.status+' '+data.error);
            }
            else{
                layer.msg('添加成功');
            }
            layer.close(addlay);

        })*/
        $.ajax({
            type:'post',
            url: http+'/api/DetailType/insertDetailType',
            data: formData,
            success: function (data) {
                layer.msg('添加成功');
                layer.close(addlay);
            },
            error: function (data) {
                layer.msg('错误码：'+data.status);
                layer.close(addlay);
            }
        })
    }


</script>-->
<!--
<script>

    &lt;!&ndash;表单渲染&ndash;&gt;
    $(document).ready(function () {
        var ele = layui.element;
        ele.render();
    });
    layui.use('form', function(){
        var form = layui.form;
        form.render();
    });
    /*$(".myPatent").style.display = "none";*/
    /*    $('#myPatent').css('display','none');*/
/*    $('.myPatent').toggle();*/

/*    var grantdate = document.getElementById('grantdate')
    grantdate.onfocus = function (event) {
        this.type = 'date';
        this.focus();
    }*/


    var http = "http://148.70.243.66:8888";

/*    function loadData(data) {
        table.render({
            elem:"#myptable",
            data:data,
            cols:[[
                {type:"checkbox"},
                {field:"patent_NAME",title:"专利名称"},
                {field:"name",title:"作者"},
                {field:"dname",title:"状态"},
                /!*{field:"",title:"代理公司"},*!/
                {field:"application_TIME",title:"申请日期"},
                {field:"acceptance_TIME",title:"受理日期"},
                {field:"authorization_TIME",title:"授权日期"},
            ]],
            page:true,
            toolbar:"#myptool"
        })
    }
    function pureData(data) {
        var puredata = []
        for(var i =0;i<data.length;i++){
            puredata.push({"patent_NAME":data[i].patent_NAME,"name":data[i].name,"dname":data[i].dname,"application_TIME":data[i].application_TIME,"acceptance_TIME":data[i].acceptance_TIME,"authorization_TIME":data[i].authorization_TIME})
        }
        return puredata
    }
    function showtable() {
        $.get(http + "/api/dc/findPatent", function (result) {

            loadData(pureData(result.data))
        })

        /!* console.log(result.data)
            var str = ''
 /!*           for (var i=0;i<result.data.length;i++){
                if(result.data[i].MEMO == null){
                    result.data[i].MEMO ="";
                }
            }*!/
            for (var i=0;i<result.data.length;i++){
                str += '<tr>';
                var tds = '<td>' + result.data[i].PNAME + '</td>'
                    + '<td>' + result.data[i].PTYPE + '</td>'
                    + '<td>' + result.data[i].UID + '</td>'
                    + '<td style="display: none">' + result.data[i].DID + '</td>'
                    + '<td>' + result.data[i].MEMO + '</td>'
                    + '<td>' +
                    /!* '<button data-method="notice"  class="layui-btn edit" ><i class="layui-icon layui-icon-edit"></i>编辑</button>' +*!/
                    '<button data-method="notice"  class="layui-btn layui-btn-normal  download" onclick="downloadFile(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-download-circle"></i>相关文件下载</button>' +
                    '<button data-method="notice"  class=" layui-btn layui-btn-danger delete" onclick="del(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-delete"></i>删除</button>' +
                    '</td>';
                str += tds ;
                str += '</tr>';
            }
            $("#mypbody").html(str)

            var selectStr = ''
            var arr = []
            selectStr += ' <option>'+"请选择专利类型"+'</option>';
            for (var i=0;i<result.data.length;i++){
                if(arr.indexOf(result.data[i].PTYPE) == -1){
                    arr.push(result.data[i].PTYPE)
                    var ops = ' <option value='+result.data[i].PTYPE+'>'+ result.data[i].PTYPE +'</option>'
                    selectStr += ops
                }
            }
            $("#myptype").html(selectStr)
            layui.use('form', function(){//需要再次渲染form才能在界面显示
                var form = layui.form;
                form.render();
            });
        })*!/
    }
    showtable();*/

/*    //条件（模糊）查询
    function conditionSearch(){
        $.get(http+"/api/dc/findPatent",{ptype:pform.ptype.value,pname:pform.ptitle.value},function (result) {
            console.log(result)
            if(result.data.length > 0){
                for (var i=0;i<result.data.length;i++){
                    if(result.data[i].MEMO == null){
                        result.data[i].MEMO ="";
                    }
                }
                var str1 = ''
                for (var i=0;i<result.data.length;i++){
                    str1 += '<tr>';
                    var ctds = '<td>' + result.data[i].PNAME + '</td>'
                        + '<td>' + result.data[i].PTYPE + '</td>'
                        + '<td style="display: none">' + result.data[i].DID + '</td>'
                        + '<td>' + result.data[i].UID + '</td>'
                        + '<td>' + result.data[i].MEMO + '</td>'
                        + '<td>' +
                        /!* '<button data-method="notice"  class="layui-btn edit" ><i class="layui-icon layui-icon-edit"></i>编辑</button>' +*!/
                        '<button data-method="notice"  class="layui-btn layui-btn-normal  download" onclick="downloadFile(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-download-circle"></i>相关文件下载</button>' +
                        '<button data-method="notice"  class=" layui-btn layui-btn-danger delete" onclick="del(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-delete"></i>删除</button>' +
                        '</td>';
                    str1 += ctds ;
                    str1 += '</tr>';
                }
                $("#mypbody").html(str1)
            }else{
                var tips = '<tr align="center">'+'<td colspan="5">'+" 没有符合条件的信息！"+'</td>'+'</tr>'
                $("#mypbody").html(tips)
            }
        })
    }

    //下载相关文件
    function downloadFile(UUID){
        layer.confirm("确认下载？", { title: "Tips" ,btn: ['确定','取消']}, function (index) {
            $.get(http+"/api/dc/patentDownload",{uuid:UUID},function (result) {
                {
                    layer.msg(result.msg, {icon: -1, shade: 0.3, offset: '40%', time: 2000});
                    console.log(result)
                    //layer.close(index); //如果设定了yes回调，需进行手工关闭
                }
            });
        });
    }

    &lt;!&ndash;删除&ndash;&gt;
    layui.use('layer', function(){
        var $ = layui.jquery;
    });
    function del(uuid){
        /!*  console.log(uuid)*!/
        layer.confirm("确认删除?", { title: "Tips",btn: ['确定','取消'] }, function (index) {
            $.post(http+"/api/dc/patentDeleteByUuid", { uuid: uuid}, function (data)
            {
                layer.msg(data.msg,{icon:-1,shade:0.3,offset: '40%',time:2000});
                //layer.close(index); //如果设定了yes回调，需进行手工关闭
                setTimeout(function(){
                    //刷新
                    location.reload();
                },500);
            });
        });

        /!*        //如果没当前用户为学生，则隐藏编辑和删除按钮
                $('.edit').addClass('layui-hide');
                $('.delete').addClass('layui-hide');*!/
    }

    //文件上传
    $("#pupload").on('click',function () {
        file.config.data = {
            DID:pfm.pDID.value,
            UID:window.sessionStorage.getItem("uid"),
            PTYPE:pfm.ptype.value,
            PNAME:pfm.pname.value,
            MEMO:pfm.pmemo.value
        }
    })

    var upload = layui.upload,
        element = layui.element;
    element.init();

    file = upload.render({
        elem: '#pchoosefile'
        ,url: http + "/api/dc/patentUpload"
        ,accept: 'file' //允许上传的文件类型
        ,auto: false
        //,multiple: true
        ,bindAction: '#pupload'
        ,done: function(res){
            layui.use('layer', function(){
                var layer = layui.layer;
                layer.alert("<h2 style='color:black'>" + '上传成功！' + "</h2>",{title: "Tips"});
                setTimeout(function(){
                    //刷新
                    location.reload();
                },1000);
            });
            console.log(res)  //返回对象数据
        }
    })*/

/*    //分页
    layui.use(['laypage', 'layer'], function(){
        var laypage = layui.laypage
            ,layer = layui.layer;

        laypage.render({
            elem: 'ppaging'
            ,count: 10
            ,layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip']
            ,jump: function(obj){
                console.log(obj)
                console.log(obj.curr)  //当前页号
                console.log(obj.limit); //得到每页显示的条数
            }
        });
    });*/
</script>-->

<!--著作-->
<script>
    var addlay,editlay;
    var http = 'http://148.70.243.66:8888';
    var getbid = location.search;
    var bybid = "";
    if(getbid){
        var cout = 0;
        for(var i=0;i<getbid.length;i++){
            if(cout!=0){
                bybid+=getbid.charAt(i);
            }
            if(getbid.charAt(i)==="="){
                cout = i;
            }
        }
    }
    layui.use('table', function() {
        var table = layui.table
            , form = layui.form;
        var $ = layui.$;

        function loadData(data) {//渲染表
            table.render({
                elem: '#WTable',
                data: data,
                cols: [[
                    {type: 'checkbox'},
                    {field: 'softwareName', title: '名称'},
                    {field: 'writers', title: '作者'},
                    {field: 'publishTime', title: '时间'},
                    {field: 'webSite', title: '网址'},
                    {field: '', title: '设计文档', sort: true}, //暂未显示
                    {fixed: 'right', title: '操作', templet: '#handle', align: 'center'}
                ]],
                page: true,
                toolbar: '#myWToolbar',

            })
        }

        //加载表数据
        function loadTable(){
            $.get(http+'/api/software/find',function (result) {
                console.log(result.data[0].writers)
                for(var i=0;i<result.data.length;i++){
                    result.data[i].webSite = "<a href=`result.data[i].webSite`>" + result.data[i].webSite + "</a>"
                    /*   console.log(result.data[i].webSite)*/
                    var authorinfo = ''
                    for(var j=0;j<result.data[i].writers.length;j++){
                        authorinfo += result.data[i].writers[j].name + ":" + result.data[i].writers[j].gender +","+ result.data[i].writers[j].unit +","+ result.data[i].writers[j].typeName +","+ result.data[i].writers[j].professionalTitle +","+ result.data[i].writers[j].writerType+"。"+ " <br>"
                    }
                    result.data[i].writers = authorinfo
                }
                loadData(result.data);
            });
        }
        loadTable()
        //模糊查询
        function conditionSearch(){
            $.get(http+"/api/dc/findThesis",{PATENT_NAME:pform.ptitle.value,AGENCY_COMPANY:pform.pagency.value},function (result) {
                loadData(data.data);
            })
        }


        //重载
        $('#find').click(function () {
            var did = $('#search').val();
            if (did.length != 0) {
                $.post(http+'/api/DetailType/findById', {"did": did}, function (data) {
                    if(data.data==null){
                        layer.msg('没有找到该详细类型')
                    }
                    else{
                        var myData = [];
                        myData.push(data.data);
                        loadData(myData);
                    }
                })
            } else {
                loadTable();
            }
        });
        //回车重载
        $('#search').on('keypress',function (event) {
            if(event.keyCode==13){
                $('#find').click();
            }
        });
        //回车添加
        $('#addWContainer').on('keypress',function (event) {
            if(event.keyCode==13){
                addDetail();
            }
        });

        //监听头工具栏事件（添加、批量删除）
        table.on('toolbar(ATable)', function(obj){
            var checkStatus = table.checkStatus(obj.config.id)
                ,data = checkStatus.data; //获取选中的数据
            switch(obj.event){
                case 'add':
                    addlay = layer.open({
                        type: 1,
                        title: '添加软件信息',
                        area: ['80%', '70%'],
                        content: $('#addWContainer'),
                        end: function () {
                            loadTable();
                        }
                    });
                    break;
                case 'delete':
                    if(data.length === 0){
                        layer.msg('请选择一行');
                    } else {
                        //删除
                        var dids = "";
                        for(var i=0;i<data.length;i++){
                            if(i!=data.length-1){
                                dids+=data[i].uuid+",";
                            }
                            else{
                                dids+=data[i].uuid
                            }
                        }
                        $.get(http+'/api/software/delete',{"uuid":dids},function () {
                            loadTable();
                        })
                    }
                    break;
            }
        });
        //单个删除/下载
        table.on('tool(ATable)', function(obj) {
            var data = obj.data;
            console.log(data)
            if (obj.event === 'del') {
                layer.confirm('确认删除吗？', {title: '删除'}, function (index) {
                    obj.del();
                    $.post(http+'/api/dc/writingsDeleteByUuid', {"uuid": data.uuid}, function () {
                        layui.use('layer', function(){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '删除成功! '  + "</h3>",{title:"温馨提示"});
                            setTimeout(function(){
                                //刷新
                                location.reload();
                            },1000);
                        });
                    });
                    layer.close(index);
                });
            }
            if(obj.event === 'download'){
                layer.confirm('请选择下载文件！', {
                    title: "Tips" ,btnAlign: 'c',
                    btn: ['设计文档下载', '相关文件下载','取消']
                    ,btn3: function(index, layero){
                        close()
                    }
                }, function(index, layero){
                    $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1205"}, function (result) {
                        if(result.status =="success"){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                        }
                    })
                }, function(index){
                    //按钮二的回调
                    $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1204"}, function (result) {
                        if(result.status =="success"){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                        }
                    })
                });
            }
            /*             if(obj.event === 'query'){
                            var a = $('#query');
                            a.attr('href','')
                        }*/
        });
    });
    var DataDeal = {
        //将从form中通过$('#refer').serialize()获取的值转成json
        formToJson: function (data) {
            data=data.replace(/&/g,"\",\"");
            data=data.replace(/=/g,"\":\"");
            data="{\""+data+"\"}";
            return data;
        }
    };

    //提交添加表单
    function addDetail() {
        var $ = layui.$;
        var formData = $('#addWDetail').serialize();
        formData= decodeURIComponent(formData,true);//防止中文乱码
        var jsondata=DataDeal.formToJson(formData);//转化为json
        console.log(jsondata )
        console.log("aaaaaaaaaaaaaaaaaaaaa")
        $.ajax({
            type:'post',
            url: http+'/api/software/insert',
            data: formData,
            success: function (data) {
                layer.msg('添加成功');
                layer.close(addlay);
            },
            error: function (data) {
                layer.msg('错误码：'+data.status);
                layer.close(addlay);
            }
        })
    }

</script>
<!--<script>

    &lt;!&ndash;表单渲染&ndash;&gt;
    $(document).ready(function () {
        var ele = layui.element;
        ele.render();
    });
    layui.use('form', function(){
        var form = layui.form;
        form.render();
    });

    var http = "http://148.70.243.66:8888";

    //首次加载表格
    function showtable(){
        $.get(http+"/api/dc/findWritings",function (result) {
            console.log(result)
            console.log(result.data.length)
            var str = ''
            for (var i=0;i<result.data.length;i++){
                if(result.data[i].MEMO == null){
                    result.data[i].MEMO ="";
                }
            }
            for (var i=0;i<result.data.length;i++){
                str += '<tr>';
                var tds = '<td>' + result.data[i].WNAME + '</td>'
                    + '<td>' + result.data[i].WTYPE + '</td>'
                    + '<td style="display: none">' + result.data[i].DID + '</td>'
                    + '<td>' + result.data[i].UID + '</td>'
                    + '<td>' + result.data[i].WAUTHOR + '</td>'
                    + '<td>' + result.data[i].MEMO + '</td>'
                    + '<td>' +
                    /* '<button data-method="notice"  class="layui-btn edit" ><i class="layui-icon layui-icon-edit"></i>编辑</button>' +*/
                    '<button data-method="notice"  class="layui-btn layui-btn-normal  download" onclick="downloadFile(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-download-circle"></i>相关文件下载</button>' +
                    '<button data-method="notice"  class=" layui-btn layui-btn-danger delete" onclick="del(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-delete"></i>删除</button>' +
                    '</td>';
                str += tds ;
                str += '</tr>';
            }

            $("#mywbody").html(str)

            var selectStr = ''
            var arr = []
            selectStr += ' <option>'+"请选择著作类型"+'</option>';
            for (var i=0;i<result.data.length;i++){
                if(arr.indexOf(result.data[i].WTYPE) == -1){
                    arr.push(result.data[i].WTYPE)
                    var ops = ' <option value='+result.data[i].WTYPE+'>'+ result.data[i].WTYPE +'</option>'
                    selectStr += ops
                }
            }
            $("#mywtype").html(selectStr)
            layui.use('form', function(){//需要再次渲染form才能在界面显示
                var form = layui.form;
                form.render();
            });
        })
    }
    window.onload = showtable;

    //条件（模糊）查询
    function conditionSearch(){
        $.get(http+"/api/dc/findWritings",{wtype:wform.wtype.value,wname:wform.wtitle.value,wauthor:wform.wauthor.value},function (result) {
            console.log(result)
            if(result.data.length>0) {
                for (var i = 0; i < result.data.length; i++) {
                    if (result.data[i].MEMO == null) {
                        result.data[i].MEMO = "";
                    }
                }
                var str1 = ''
                for (var i = 0; i < result.data.length; i++) {
                    str1 += '<tr>';
                    var ctds = '<td>' + result.data[i].WNAME + '</td>'
                        + '<td>' + result.data[i].WTYPE + '</td>'
                        + '<td style="display: none">' + result.data[i].DID + '</td>'
                        + '<td>' + result.data[i].UID + '</td>'
                        + '<td>' + result.data[i].WAUTHOR + '</td>'
                        + '<td>' + result.data[i].MEMO + '</td>'
                        + '<td>' +
                        /*'<button data-method="notice"  class="layui-btn edit" ><i class="layui-icon layui-icon-edit"></i>编辑</button>' +*/
                        '<button data-method="notice"  class="layui-btn layui-btn-normal  download" onclick="downloadFile(`'+result.data[i].UUID+'`)"><i class="layui-icon layui-icon-download-circle"></i>相关文件下载</button>' +
                        '<button data-method="notice"  class=" layui-btn layui-btn-danger delete" onclick="del(`' + result.data[i].UUID + '`)"><i class="layui-icon layui-icon-delete"></i>删除</button>' +
                        '</td>';
                    str1 += ctds;
                    str1 += '</tr>';
                }
                $("#mywbody").html(str1)
            }else{
                var tips = '<tr align="center">'+'<td colspan="6">'+" 没有符合条件的信息！"+'</td>'+'</tr>'
                $("#mywbody").html(tips)
            }
        })
    }

    //下载相关文件
    function downloadFile(UUID){
        layer.confirm("确认下载？", { title: "Tips",btn: ['确定','取消'] }, function (index) {
            $.get(http+"/api/dc/writingsDownload",{uuid:UUID},function (result) {
                {
                    layer.msg(result.msg, {icon: -1, shade: 0.3, offset: '40%', time: 2000});
                    console.log(result)
                    //layer.close(index); //如果设定了yes回调，需进行手工关闭
                }
            });
        });
    }

    &lt;!&ndash;删除&ndash;&gt;
    layui.use('layer', function(){
        var $ = layui.jquery;
    });
    function del(uuid){
        /*  console.log(uuid)*/
        layer.confirm("确认删除?", { title: "Tips" ,btn: ['确定','取消']}, function (index) {
            $.post(http+"/api/dc/writingsDeleteByUuid", { uuid: uuid}, function (data)
            {
                layer.msg(data.msg,{icon:-1,shade:0.3,offset: '40%',time:2000});
                //layer.close(index); //如果设定了yes回调，需进行手工关闭
                setTimeout(function(){
                    //刷新
                    location.reload();
                },500);
            });
        });

        /*        //如果没当前用户为学生，则隐藏编辑和删除按钮
                $('.edit').addClass('layui-hide');
                $('.delete').addClass('layui-hide');*/
    }

    //文件上传
    $("#upload").on('click',function () {
        file.config.data = {
            DID:wfm.wDID.value,
            UID:window.sessionStorage.getItem("uid"),
            WTYPE:wfm.wtype.value,
            WNAME:wfm.wname.value,
            WAUTHOR:wfm.wauthor.value,
            MEMO:wfm.wmemo.value
        }
    })

    var upload = layui.upload,
        element = layui.element;
    element.init();

    file = upload.render({
        elem: '#wchoosefile'
        ,url: http + "/api/dc/WritingsUpload"
        ,accept: 'file' //允许上传的文件类型
        ,auto: false
        //,multiple: true
        ,bindAction: '#wupload'
        ,done: function(res){
            layui.use('layer', function(){
                var layer = layui.layer;
                layer.alert("<h2 style='color:black'>" + '上传成功！' + "</h2>",{title: "Tips"});
                setTimeout(function(){
                    //刷新
                    location.reload();
                },1000);
            });
            console.log(res)  //返回对象数据
        }
    })

    //分页

    layui.use(['laypage', 'layer'], function(){
        var laypage = layui.laypage
            ,layer = layui.layer;

        laypage.render({
            elem: 'wpaging'
            ,count: 10
            ,layout: ['count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip']
            ,jump: function(obj){
                console.log(obj)
                console.log(obj.curr)  //当前页号
                console.log(obj.limit); //得到每页显示的条数
            }
        });
    });

</script>-->

<!--获奖-->
<!--<script>
    var addlay,editlay;
    var http = 'http://148.70.243.66:8888';
    var getbid = location.search;
    var bybid = "";
    if(getbid){
        var cout = 0;
        for(var i=0;i<getbid.length;i++){
            if(cout!=0){
                bybid+=getbid.charAt(i);
            }
            if(getbid.charAt(i)==="="){
                cout = i;
            }
        }
    }
    layui.use('table', function() {
        var table = layui.table
            , form = layui.form;
        var $ = layui.$;

        function loadData(data) {//渲染表
            table.render({
                elem: '#AWTable',
                data: data,
                cols: [[
                    {type: 'checkbox'},
                    {field: 'award_NAME ', title: '名称'},
                    {field: 'name ', title: '获奖人'},
                    {field: 'ranking', title: '名次'},
                    {field: 'award_TIME ', title: '获奖时间', sort: true},
                    {field: 'award_UNIT ', title: '获奖单位', sort: true},
                    {fixed: 'right', title: '操作', templet: '#handle', align: 'center'}
                ]],
                page: true,
                toolbar: '#myAWToolbar',

            })
        }

        //加载表数据
        function loadTable(){
            $.get(http+'/api/dc/findAward',function (result) {
/*                for(var i=0;i<result.data.length;i++){
                    var authorinfo = ''
                    for(var j=0;j<result.data[i].writers.length;j++){
                        authorinfo += result.data[i].writers[j].name + ":" + result.data[i].writers[j].gender +","+ result.data[i].writers[j].unit +","+ result.data[i].writers[j].typeName +","+ result.data[i].writers[j].professionalTitle +","+ result.data[i].writers[j].writerType+"。"+ " <br>"
                    }
                    result.data[i].writers = authorinfo
                }*/
                loadData(result.data);
            });
        }
        loadTable()
        //模糊查询
        function conditionSearch(){
            $.get(http+"/api/dc/findThesis",{PATENT_NAME:pform.ptitle.value,AGENCY_COMPANY:pform.pagency.value},function (result) {
                loadData(data.data);
            })
        }


        //重载
        $('#find').click(function () {
            var did = $('#search').val();
            if (did.length != 0) {
                $.post(http+'/api/DetailType/findById', {"did": did}, function (data) {
                    if(data.data==null){
                        layer.msg('没有找到该详细类型')
                    }
                    else{
                        var myData = [];
                        myData.push(data.data);
                        loadData(myData);
                    }
                })
            } else {
                loadTable();
            }
        });
        //回车重载
        $('#search').on('keypress',function (event) {
            if(event.keyCode==13){
                $('#find').click();
            }
        });
        //回车添加
        $('#addAWContainer').on('keypress',function (event) {
            if(event.keyCode==13){
                addDetail();
            }
        });

        //监听头工具栏事件（添加、批量删除）
        table.on('toolbar(AWTable)', function(obj){
            var checkStatus = table.checkStatus(obj.config.id)
                ,data = checkStatus.data; //获取选中的数据
            switch(obj.event){
                case 'add':
                    addlay = layer.open({
                        type: 1,
                        title: '添加获奖信息',
                        area: ['80%', '70%'],
                        content: $('#addAWContainer'),
                        end: function () {
                            loadTable();
                        }
                    });
                    break;
                case 'delete':
                    if(data.length === 0){
                        layer.msg('请选择一行');
                    } else {
                        //删除
                        var dids = "";
                        for(var i=0;i<data.length;i++){
                            if(i!=data.length-1){
                                dids+=data[i].uuid+",";
                            }
                            else{
                                dids+=data[i].uuid
                            }
                        }
                        $.get(http+'/api/software/delete',{"uuid":dids},function () {
                            loadTable();
                        })
                    }
                    break;
            }
        });
        //单个删除/下载
        table.on('tool(ATable)', function(obj) {
            var data = obj.data;
            console.log(data)
            if (obj.event === 'del') {
                layer.confirm('确认删除吗？', {title: '删除'}, function (index) {
                    obj.del();
                    $.post(http+'/api/dc/awardDeleteByUuid', {"uuid": data.uuid}, function () {
                        layui.use('layer', function(){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '删除成功! '  + "</h3>",{title:"温馨提示"});
                            setTimeout(function(){
                                //刷新
                                location.reload();
                            },1000);
                        });
                    });
                    layer.close(index);
                });
            }
            if(obj.event === 'download'){
                layer.confirm('请选择下载文件！', {
                    title: "Tips" ,btnAlign: 'c',
                    btn: ['设计文档下载', '相关文件下载','取消']
                    ,btn3: function(index, layero){
                        close()
                    }
                }, function(index, layero){
                    $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1205"}, function (result) {
                        if(result.status =="success"){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                        }
                    })
                }, function(index){
                    //按钮二的回调
                    $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1204"}, function (result) {
                        if(result.status =="success"){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                        }
                    })
                });
            }
            /*             if(obj.event === 'query'){
                            var a = $('#query');
                            a.attr('href','')
                        }*/
        });
    });
    var DataDeal = {
        //将从form中通过$('#refer').serialize()获取的值转成json
        formToJson: function (data) {
            data=data.replace(/&/g,"\",\"");
            data=data.replace(/=/g,"\":\"");
            data="{\""+data+"\"}";
            return data;
        }
    };

    //提交添加表单
    function addDetail() {
        var $ = layui.$;
        var formData = $('#addAWDetail').serialize();
        formData= decodeURIComponent(formData,true);//防止中文乱码
        var jsondata=DataDeal.formToJson(formData);//转化为json
        console.log(jsondata )
        console.log("aaaaaaaaaaaaaaaaaaaaa")
        $.ajax({
            type:'post',
            url: http+'/api/software/insert',
            data: formData,
            success: function (data) {
                layer.msg('添加成功');
                layer.close(addlay);
            },
            error: function (data) {
                layer.msg('错误码：'+data.status);
                layer.close(addlay);
            }
        })
    }

    //提交编辑表单
    function editDetail() {
        var $ = layui.$;
        var formData = $('#editAWDetail').serialize();
        /*$.post(http+'/api/DetailType/updateById',formData,function () {
            layer.close(editlay);
        })*/
        $.ajax({
            type: 'put',
            url: http+'/api/DetailType/updateById',
            data: formData,
            success: function () {
                layer.close(editlay);
            },
        })
    }

</script>-->

<!--软件-->
<script>
    var addlay,editlay;
    var http = 'http://148.70.243.66:8888';
    var getbid = location.search;
    var bybid = "";
    if(getbid){
        var cout = 0;
        for(var i=0;i<getbid.length;i++){
            if(cout!=0){
                bybid+=getbid.charAt(i);
            }
            if(getbid.charAt(i)==="="){
                cout = i;
            }
        }
    }
    layui.use('table', function() {
        var table = layui.table
            , form = layui.form;
        var $ = layui.$;

        function loadData(data) {//渲染表
            table.render({
                elem: '#ATable',
                data: data,
                cols: [[
                    {type: 'checkbox'},
                    {field: 'softwareName', title: '名称'},
                    {field: 'writers', title: '作者'},
                    {field: 'publishTime', title: '时间'},
                    {field: 'webSite', title: '网址'},
                    {field: '', title: '设计文档', sort: true}, //暂未显示
                    {fixed: 'right', title: '操作', templet: '#handle', align: 'center'}
                ]],
                toolbar: '#myAToolbar',

            })
        }

        //加载表数据
        function loadTable(){
            $.get(http+'/api/software/find',function (result) {
                /*console.log(result.data[0].writers)*/
                for(var i=0;i<result.data.length;i++){
                    result.data[i].webSite = "<a href=`result.data[i].webSite`>" + result.data[i].webSite + "</a>"
                 /*   console.log(result.data[i].webSite)*/
                    var authorinfo = ''
                    for(var j=0;j<result.data[i].writers.length;j++){
                        authorinfo += result.data[i].writers[j].name + ":" + result.data[i].writers[j].gender +","+ result.data[i].writers[j].unit +","+ result.data[i].writers[j].typeName +","+ result.data[i].writers[j].professionalTitle +","+ result.data[i].writers[j].writerType+"。"+ " <br>"
                    }
                    result.data[i].writers = authorinfo
                }
                loadData(result.data);
            });
        }
        loadTable()
        //模糊查询
        function conditionSearch(){
            $.get(http+"/api/dc/findThesis",{PATENT_NAME:pform.ptitle.value,AGENCY_COMPANY:pform.pagency.value},function (result) {
                loadData(data.data);
            })
        }


        //重载
        $('#find').click(function () {
            var did = $('#search').val();
            if (did.length != 0) {
                $.post(http+'/api/DetailType/findById', {"did": did}, function (data) {
                    if(data.data==null){
                        layer.msg('没有找到该详细类型')
                    }
                    else{
                        var myData = [];
                        myData.push(data.data);
                        loadData(myData);
                    }
                })
            } else {
                loadTable();
            }
        });
        //回车重载
        $('#search').on('keypress',function (event) {
            if(event.keyCode==13){
                $('#find').click();
            }
        });
        //回车添加
        $('#addAContainer').on('keypress',function (event) {
            if(event.keyCode==13){
                addDetail();
            }
        });

        //监听头工具栏事件（添加、批量删除）
        table.on('toolbar(ATable)', function(obj){
            var checkStatus = table.checkStatus(obj.config.id)
                ,data = checkStatus.data; //获取选中的数据
            switch(obj.event){
                case 'add':
                    addlay = layer.open({
                        type: 1,
                        title: '添加软件信息',
                        area: ['80%', '70%'],
                        content: $('#addAContainer'),
                        end: function () {
                            loadTable();
                        }
                    });
                    break;
                case 'delete':
                    if(data.length === 0){
                        layer.msg('请选择一行');
                    } else {
                        //删除
                        var dids = "";
                        for(var i=0;i<data.length;i++){
                            if(i!=data.length-1){
                                dids+=data[i].uuid+",";
                            }
                            else{
                                dids+=data[i].uuid
                            }
                        }
                        $.get(http+'/api/software/delete',{"uuid":dids},function () {
                            loadTable();
                        })
                    }
                    break;
            }
        });
        //单个删除/下载
        table.on('tool(ATable)', function(obj) {
            var data = obj.data;
            console.log(data)
            if (obj.event === 'del') {
                layer.confirm('确认删除吗？', {title: '删除'}, function (index) {
                    obj.del();
                    $.get(http+'/api/software/delete', {"uuid": data.uuid}, function () {
                        layui.use('layer', function(){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '删除成功! '  + "</h3>",{title:"温馨提示"});
                            setTimeout(function(){
                                //刷新
                                location.reload();
                            },1000);
                        });
                    });
                    layer.close(index);
                });
            }
                     if(obj.event === 'download'){
                             layer.confirm('请选择下载文件！', {
                                 title: "Tips" ,btnAlign: 'c',
                                 btn: ['设计文档下载', '相关文件下载','取消']
                                 ,btn3: function(index, layero){
                                     close()
                                 }
                             }, function(index, layero){
                                 $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1205"}, function (result) {
                                    if(result.status =="success"){
                                        var layer = layui.layer;
                                        layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                                    }
                                 })
                             }, function(index){
                                 //按钮二的回调
                                 $.get(http+'/api/software/downLoadFile', {"uuid": data.uuid,fileTypeId:"1204"}, function (result) {
                                     if(result.status =="success"){
                                         var layer = layui.layer;
                                         layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                                     }
                                 })
                             });
                         }
        });
    });

    //添加作者信息
    function addInfo() {
        var winfo = []
        winfo =  $("#awid").find("option:selected").text() + ":" +  $("#aorder").find("option:selected").text()
        $("#awinfo").append(winfo+",")
    }
    //添加码信息
    function addCode() {
        var dinfo = []
        dinfo =  $("#awid").find("option:selected").val() + "," +  $("#aorder").find("option:selected").val() + ","
        $("#detailInfo").append(dinfo)
    }

    //转格式
    $.fn.serializeObject = function()
    {
        var res = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (res[this.name] !== undefined) {
                if (!res[this.name].push) {
                    res[this.name] = [res[this.name]];
                }
                res[this.name].push(this.value || '');
            } else {
                res[this.name] = this.value || '';
            }
        });
        return res;
    };
    //提交添加表单
    function addDetail() {
        var $ = layui.$;
        function form2JsonString(formId) {
            var paramArray = $('#' + formId).serializeArray();
            var jsonObj = {};
            $(paramArray).each(function () {
                jsonObj[this.name] = this.value;
            });
            return JSON.stringify(jsonObj);
        }
        jsondata  = eval("("+form2JsonString("addADetail")+")");
        console.log(jsondata)
        console.log(jsondata.projectId)
        console.log(jsondata.publishTime)
        console.log(jsondata.softwareName)
        console.log(jsondata.webSite)
        console.log(jsondata.detailInfo)
        var writer = []
        writer.push("0205")
        writer.push(jsondata.detailInfo.split(","))
        console.log(writer)
        console.log(writer[1].length)
        var writerInfo = [];
        var first = {
                "resultTypeId": "0206",
                "wid": "c4daf250219145819b3f2a10bc9bc1bc",
                "writerTypeId": "1101"
            };

        var second = {
                "resultTypeId": "0206",
                "wid": "0adecea8ffd5472b88f067169e0b7e10",
                "writerTypeId": "1102"
            };
        var third = {
                "resultTypeId": "0206",
                "wid": "0adecea8ffd5472b88f067169e0b7e10",
                "writerTypeId": "1102"
            };

        writerInfo.push(first);
        writerInfo.push(second);

        var a = {
                "projectId": "5a1da275-131f-4e64-b004-1dca9d72a9de",
                "publishTime": "2019-09-08",
                "softwareName": "工具管理",
                "webSite": "www.baidu.com",
                writerInfo
            };


        $.ajax({
            type:'post',
            url: http+'/api/software/insert',
            data: jsondata,
            success: function (data) {
                layer.msg('添加成功');
                layer.close(addlay);
            },
            error: function (data) {
                layer.msg('错误码：'+data.status);
                layer.close(addlay);
            }
        })
    }

</script>

<!--报告-->
<script>
    var addlay,editlay;
    var http = 'http://148.70.243.66:8888';
    var getbid = location.search;
    var bybid = "";
    if(getbid){
        var cout = 0;
        for(var i=0;i<getbid.length;i++){
            if(cout!=0){
                bybid+=getbid.charAt(i);
            }
            if(getbid.charAt(i)==="="){
                cout = i;
            }
        }
    }
    layui.use('table', function() {
        var table = layui.table
            , form = layui.form;
        var $ = layui.$;

        function loadData(data) {//渲染表
            table.render({
                elem: '#RTable',
                data: data,
                cols: [[
                    {type: 'checkbox'},
                    {field: 'reportName', title: '名称'},
                    {field: 'writerInfos', title: '撰写人'},
                    {field: 'writeTime', title: '撰写时间'},
                    {fixed: 'right', title: '操作', templet: '#handle', align: 'center'}
                ]],
                page: true,
                toolbar: '#myRToolbar',

            })
        }

        //加载表数据
        function loadTable(){
            $.get(http+'/api/resultReport/find',function (result) {
                console.log(result.data[0].writerInfos)
                for(var i=0;i<result.data.length;i++){
                    var authorinfo = ''
                    for(var j=0;j<result.data[i].writerInfos.length;j++){
                        authorinfo += result.data[i].writerInfos[j].writerName + ":" + result.data[i].writerInfos[j].gender +","+ result.data[i].writerInfos[j].typeName +","+ result.data[i].writerInfos[j].professionalTitle +","+ result.data[i].writerInfos[j].writerType+"。"+ " <br>"
                    }
                    result.data[i].writerInfos = authorinfo
                }
                loadData(result.data);
            });
        }
        loadTable()
        //模糊查询
        function conditionSearch(){
            $.get(http+"/api/dc/findThesis",{PATENT_NAME:pform.ptitle.value,AGENCY_COMPANY:pform.pagency.value},function (result) {
                loadData(data.data);
            })
        }


        //重载
        $('#find').click(function () {
            var did = $('#search').val();
            if (did.length != 0) {
                $.post(http+'/api/DetailType/findById', {"did": did}, function (data) {
                    if(data.data==null){
                        layer.msg('没有找到该详细类型')
                    }
                    else{
                        var myData = [];
                        myData.push(data.data);
                        loadData(myData);
                    }
                })
            } else {
                loadTable();
            }
        });
        //回车重载
        $('#search').on('keypress',function (event) {
            if(event.keyCode==13){
                $('#find').click();
            }
        });
        //回车添加
        $('#addRContainer').on('keypress',function (event) {
            if(event.keyCode==13){
                addDetail();
            }
        });

        //监听头工具栏事件（添加、批量删除）
        table.on('toolbar(RTable)', function(obj){
            var checkStatus = table.checkStatus(obj.config.id)
                ,data = checkStatus.data; //获取选中的数据
            switch(obj.event){
                case 'add':
                    addlay = layer.open({
                        type: 1,
                        title: '添加报告',
                        area: ['80%', '70%'],
                        content: $('#addRContainer'),
                        end: function () {
                            loadTable();
                        }
                    });
                    break;
                case 'delete':
                    if(data.length === 0){
                        layer.msg('请选择一行');
                    } else {
                        //删除
                        var dids = "";
                        for(var i=0;i<data.length;i++){
                            if(i!=data.length-1){
                                dids+=data[i].uuid+",";
                            }
                            else{
                                dids+=data[i].uuid
                            }
                        }
                        $.get(http+'/api/resultReport/delete',{"uuid":dids},function () {
                            loadTable();
                        })
                    }
                    break;
            }
        });
        //单个删除/下载/上传
        table.on('tool(RTable)', function(obj) {
            var data = obj.data;
            console.log(data)
            if (obj.event === 'del') {
                layer.confirm('确认删除吗？', {title: '删除'}, function (index) {
                    obj.del();
                    $.get(http+'/api/resultReport/delete', {"uuid": data.uuid}, function () {
                        layui.use('layer', function(){
                            var layer = layui.layer;
                            layer.alert("<h3 style='color:black'>" + '删除成功! '  + "</h3>",{title:"温馨提示"});
                            setTimeout(function(){
                                //刷新
                                location.reload();
                            },1000);
                        });
                    });
                    layer.close(index);
                });
            }
            if(obj.event === 'download'){
                layer.confirm("确认下载？", { title: "Tips",btn: ['确定','取消'] }, function (index) {
                    $.get(http+"/api/dc/thesisDownload",{uuid:data.uuid},function (result) {
                        {
                            layer.msg(result.msg, {icon: -1, shade: 0.3, offset: '40%', time: 2000});
                            if(result.status =="success"){
                                var layer = layui.layer;
                                layer.alert("<h3 style='color:black'>" + '已开始下载! '  + "</h3>",{title:"温馨提示"});
                            }
                            //layer.close(index); //如果设定了yes回调，需进行手工关闭
                        }
                    });
                });
            }
            if(obj.event === 'upload'){
                layer.open({
                    title: '上传'
                    ,content: '<input type="text" id="fileName" placeholder="请输入文档名称">',
                    yes:function () {
                        $.post(http+"/api/resultReport/uploadFile",{uuid:data.uuid,fileName:fileName.value},function (result) {
                            if(result.status =="success"){
                                var layer = layui.layer;
                                layer.alert("<h3 style='color:black'>" + '上传成功！ '  + "</h3>",{title:"温馨提示"});
                            }
                        })
                    }
                });
            }
        });
    });


    //转为对象格式
    var DataDeal = {
        //将从form中通过$('#refer').serialize()获取的值转成json
        formToJson: function (data) {
            data=data.replace(/&/g,"\",\"");
            data=data.replace(/=/g,"\":\"");
            data="{\""+data+"\"}";
            return data;
        }
    };

    //提交添加表单
/*    function addDetail() {
        var $ = layui.$;
        var formData = $('#addRDetail').serialize();
        console.log(formData)
        formData= decodeURIComponent(formData,true);//防止中文乱码
        var jsondata = DataDeal.formToJson(formData);//转化为json
        console.log(jsondata)
        console.log("222222222222")
        var writer = []
        writer.push({"resultTypeId":jsondata.resultTypeId,"writerId":jsondata.writerId,"writerTypeId":jsondata.writerTypeId})
        delete jsondata.resultTypeId
        delete jsondata.writerId
        delete jsondata.writerTypeId
        console.log(jsondata)
        console.log("1111111111111")
        let key = 'writers'
        let value = writer
        jsondata[key] = value
        console.log(jsondata )
        console.log("aaaaaaaaaaaaaaaaaaaaa")
        $.ajax({
            type:'post',
            url: http+'/api/resultReport/insert',
            data: formData,
            success: function (data) {
                layer.msg('添加成功');
                layer.close(addlay);
            },
            error: function (data) {
                layer.msg('错误码：'+data.status);
                layer.close(addlay);
            }
        })
    }*/

</script>


<!--mainform-->
<script>
    var http = "http://148.70.243.66:8888";

    function generateWriter() {
        $.get(http+"/api/authorManager/findAuthor",function (result) {
            var idstr = ''
            idstr += ' <option>'+"请选择作者"+'</option>';
            for (var i=0;i<result.data.length;i++){
                var ops = ' <option value='+result.data[i].wid+'>'+ result.data[i].name +'</option>'
                idstr += ops
            }
            /*console.log(idstr)*/
            $("#writerId").html(idstr)//报告
            $("#awid").html(idstr)//软件

        })
    }
    generateWriter()

    function mainForm() {

        $.post(http+"/api/DetailType/findByBID",{bid:"02"},function(result){
            console.log(result)
            var formstr = ''
           /* formstr += ' <option>'+"请选择成果类型"+'</option>';*/
            for (var i=0;i<result.data.length;i++){
                var ops = ' <option value='+result.data[i].did+'>'+ result.data[i].dname +'</option>'
                formstr += ops
            }
            $("#mainType").html(formstr)
            layui.use('form', function(){//需要再次渲染form才能在界面显示
                var form = layui.form;
                form.render();
            });
        })
        $('#mainName').selectpicker();
    }
    window.onload = mainForm

    $(function() {

/*
        $.post(http+"",{bid:"02"},function(result){
            console.log(result)
            var namestr = ''
            /!* namestr += ' <option>'+"请选择成果类型"+'</option>';*!/
            for (var i=0;i<result.data.length;i++){
                var ops = ' <option value='+result.data[i].did+'>'+ result.data[i].dname +'</option>'
                namestr += ops
            }
            $("#mainType").html(namestr)
         /!*   $('#mainName').selectpicker('refresh');*!/
        })*/
    });
    //获取已选项
/*    var selectedValues = [];
    $("#mainName:selected").each(function(){
        selectedValues.push($(this).val());
    });*/

    function Toggle() {
        console.log($("#mainType").val() + "       6666666666666")
        if ($("#mainType").val() == "0201") {
            $(".mySoftwareWork").hide()
            $(".myPatent").hide()
            $(".myWriting").hide()
            $(".myAward").hide()
            $(".myApp").hide()
            $(".myReport").hide()
            $(".myThesis").show()
        } else if ($("#mainType").val() == "0202") {
            $(".myPatent").hide()
            $(".myWriting").hide()
            $(".myAward").hide()
            $(".myApp").hide()
            $(".myReport").hide()
            $(".myThesis").hide()
            $(".mySoftwareWork").show()
        }else if ($("#mainType").val() == "0203") {
            $(".myWriting").hide()
            $(".myAward").hide()
            $(".myApp").hide()
            $(".myReport").hide()
            $(".myThesis").hide()
            $(".mySoftwareWork").hide()
            $(".myPatent").show()
        }else if ($("#mainType").val() == "0204") {
            $(".myPatent").hide()
            $(".myAward").hide()
            $(".myApp").hide()
            $(".myReport").hide()
            $(".myThesis").hide()
            $(".mySoftwareWork").hide()
            $(".myWriting").show()
        }else if ($("#mainType").val() == "0205") {
            $(".myPatent").hide()
            $(".myWriting").hide()
            $(".myApp").hide()
            $(".myReport").hide()
            $(".myThesis").hide()
            $(".mySoftwareWork").hide()
            $(".myAward").show()
        }else if ($("#mainType").val() == "0206") {
            $(".myPatent").hide()
            $(".myWriting").hide()
            $(".myAward").hide()
            $(".myReport").hide()
            $(".myThesis").hide()
            $(".mySoftwareWork").hide()
            $(".myApp").show()
        }else if ($("#mainType").val() == "0207") {
            $(".myPatent").hide()
            $(".myWriting").hide()
            $(".myAward").hide()
            $(".myApp").hide()
            $(".myThesis").hide()
            $(".mySoftwareWork").hide()
            $(".myReport").show()
        }
    }

</script>
</body>
</html>